<!DOCTYPE html>
<html lang="en"><head>
<script src="03-Day_2_files/libs/clipboard/clipboard.min.js"></script>
<script src="03-Day_2_files/libs/quarto-html/tabby.min.js"></script>
<script src="03-Day_2_files/libs/quarto-html/popper.min.js"></script>
<script src="03-Day_2_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="03-Day_2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="03-Day_2_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="03-Day_2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.0.36">

  <meta name="author" content="Colin Rundel">
  <title>Getting Started with Shiny Day 2</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="03-Day_2_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="03-Day_2_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #767676;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #767676;  padding-left: 4px; }
    div.sourceCode
      { color: #545454; background-color: #fefefe; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #545454; } /* Normal */
    code span.al { color: #7928a1; } /* Alert */
    code span.an { color: #696969; } /* Annotation */
    code span.at { color: #aa5d00; } /* Attribute */
    code span.bn { color: #7928a1; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #d91e18; } /* ControlFlow */
    code span.ch { color: #008000; } /* Char */
    code span.cn { color: #d91e18; } /* Constant */
    code span.co { color: #696969; } /* Comment */
    code span.cv { color: #696969; font-style: italic; } /* CommentVar */
    code span.do { color: #696969; font-style: italic; } /* Documentation */
    code span.dt { color: #7928a1; } /* DataType */
    code span.dv { color: #7928a1; } /* DecVal */
    code span.er { color: #7928a1; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #aa5d00; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #696969; } /* Information */
    code span.kw { color: #d91e18; } /* Keyword */
    code span.op { color: #007faa; } /* Operator */
    code span.ot { color: #d91e18; } /* Other */
    code span.pp { color: #7928a1; } /* Preprocessor */
    code span.sc { color: #007faa; } /* SpecialChar */
    code span.ss { color: #008000; } /* SpecialString */
    code span.st { color: #008000; } /* String */
    code span.va { color: #aa5d00; } /* Variable */
    code span.vs { color: #008000; } /* VerbatimString */
    code span.wa { color: #696969; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="03-Day_2_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="03-Day_2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="03-Day_2_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="03-Day_2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="03-Day_2_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="images/hero-national-harbor.png" data-background-opacity="0.5" data-background-size="cover" class="center">
  <h1 class="title">Getting Started with Shiny<br>Day 2</h1>
  <p class="author">Colin Rundel</p>
</section>

<section>
<section id="shinydashboard" class="title-slide slide level1 center">
<h1>shinydashboard</h1>

</section>
<section id="shinydashboard-1" class="slide level2">
<h2>shinydashboard</h2>
<p>Is a package that enables the easy generation of <a href="https://getbootstrap.com/">bootstrap</a> based dynamic Shiny dashboards.</p>
<p>The core of the package is a common dashboard layout and a number of specialized UI elements (static and reactive) for creating an attractive interface.</p>
<p><br></p>

<img data-src="images/shinydashboard_layout.png" style="width:40.0%" class="r-stretch quarto-figure-center"></section>
<section id="dashboard-basics" class="slide level2">
<h2>Dashboard basics</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="|5-12|5|6-9|10|11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">shinyApp</span>(</span>
<span id="cb1-5"><a href="#cb1-5"></a>  <span class="at">ui =</span> <span class="fu">dashboardPage</span>(</span>
<span id="cb1-6"><a href="#cb1-6"></a>    <span class="fu">dashboardHeader</span>(</span>
<span id="cb1-7"><a href="#cb1-7"></a>      <span class="at">title=</span><span class="st">"Test"</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>    ),</span>
<span id="cb1-9"><a href="#cb1-9"></a>    <span class="fu">dashboardSidebar</span>(),</span>
<span id="cb1-10"><a href="#cb1-10"></a>    <span class="fu">dashboardBody</span>()</span>
<span id="cb1-11"><a href="#cb1-11"></a>  ),</span>
<span id="cb1-12"><a href="#cb1-12"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb1-13"><a href="#cb1-13"></a>  }</span>
<span id="cb1-14"><a href="#cb1-14"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dashboard-header" class="slide level2">
<h2>Dashboard header</h2>
<p>This is a container for the <code>title</code> and any <code>dropdownMenu()</code>s.</p>
<p>Dynamic menus can be generated using:</p>
<ul>
<li><p>Adding <code>dropdownMenuOutput("menu")</code> to the header</p></li>
<li><p>Adding <code>output$menu = renderMenu({...})</code> to the server, where the reactive code returns a <code>dropdownMenu()</code> object.</p></li>
</ul>
<p>This is a common design pattern within the package, so many of the static UI elements will also have a <code>*Output()</code> and <code>render*()</code> implementation.</p>
</section>
<section id="dashboard-sidebar" class="slide level2">
<h2>Dashboard sidebar</h2>
<p>This can function in the same way as the <code>sidebarPanel()</code> in <code>sidebarLayout()</code>, allowing for the inclusion of inputs and any other html content. Alternatively, it can also function as a <code>tabPanel()</code> like menu.</p>
<p>For the latter, instead of <code>tabsetPanel()</code> we use <code>sidebarMenu()</code>, text and icons are assigned using <code>menuItem()</code>s within this function. However, since the panels being activated are contained in the body and not the sidebar - their UI code goes under <code>dashboardBody()</code> using <code>tabItems()</code> and <code>tabItem()</code>. The connection is made via matching of the <code>tabName</code> arguments.</p>
</section>
<section id="body-building-blocks" class="slide level2">
<h2>Body building blocks</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h3 id="box"><code>box()</code></h3>
<p><img data-src="images/shinydashboard_box.png" data-fig-align="center" style="width:80.0%"> <img data-src="images/shinydashboard_box2.png" data-fig-align="center" style="width:80.0%"></p>
</div><div class="column" style="width:50%;">
<h3 id="infobox"><code>infoBox()</code></h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/shinydashboard_infobox.png" style="width:90.0%"></p>
</figure>
</div>
<p><br></p>
<h3 id="valuebox"><code>valueBox()</code></h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/shinydashboard_valuebox.png" style="width:90.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="colors" class="slide level2">
<h2>Colors</h2>
<p>The color of the various boxes is specified via <code>status</code> or <code>background</code> for <code>box()</code> or <code>color</code> for the others.</p>
<p>Available options include,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>shinydashboard<span class="sc">:::</span>validStatuses</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "primary" "success" "info"    "warning" "danger" </code></pre>
</div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>shinydashboard<span class="sc">:::</span>validColors</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "red"        "yellow"     "aqua"       "blue"       "light-blue"
 [6] "green"      "navy"       "teal"       "olive"      "lime"      
[11] "orange"     "fuchsia"    "purple"     "maroon"     "black"     </code></pre>
</div>
</div>
</section>
<section id="body-layout" class="slide level2">
<h2>Body layout</h2>

<img data-src="images/layout-fluidrow.png" style="width:60.0%" class="r-stretch quarto-figure-center"><p><em>Note</em> - Bootstrap defines a page to have a width of 12 units, a <code>column()</code>’s <code>width</code> is given in these units.</p>
</section>
<section id="your-turn---exercise-6" class="slide level2">
<h2>Your turn - Exercise 6</h2>
<p>Starting with the app from Demo 5 (code available in <code>exercises/ex6.R</code>) convert the app to use shinydashboard instead of <code>fluidPage()</code> and <code>sidebarLayout()</code>.</p>
<p>The specifics of the design are up to you, but think about where it makes the most sense to include the various UI elements.</p>
<p>See the documentation of <code>box()</code> and the other building blocks for guidance on how to use them, the examples <a href="http://rstudio.github.io/shinydashboard/structure.html#boxes">here</a> may also be useful.</p>
<p>If you finish early try adding a <code>valueBox()</code> or <code>infoBox()</code> (static is fine for now).</p>
<p><countdown time="600"></countdown></p>
</section>
<section id="demo-9---dynamic-boxes" class="slide level2">
<h2>Demo 9 - Dynamic boxes</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo9.R</code></p>
</div>
<div class="cell" data-file="../demos/demo9.R">
<div class="sourceCode cell-code" id="cb6" data-code-line-numbers="|29-39|33-36,37|40-44|49-60|62-73|75-84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb6-3"><a href="#cb6-3"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb6-4"><a href="#cb6-4"></a></span>
<span id="cb6-5"><a href="#cb6-5"></a>d <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb6-6"><a href="#cb6-6"></a></span>
<span id="cb6-7"><a href="#cb6-7"></a>d_vars <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="fu">names</span>()</span>
<span id="cb6-10"><a href="#cb6-10"></a></span>
<span id="cb6-11"><a href="#cb6-11"></a><span class="fu">shinyApp</span>(</span>
<span id="cb6-12"><a href="#cb6-12"></a>  <span class="at">ui =</span> <span class="fu">dashboardPage</span>(</span>
<span id="cb6-13"><a href="#cb6-13"></a>    <span class="fu">dashboardHeader</span>(</span>
<span id="cb6-14"><a href="#cb6-14"></a>      <span class="at">title =</span><span class="st">"Weather Forecasts"</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>    ),</span>
<span id="cb6-16"><a href="#cb6-16"></a>    <span class="fu">dashboardSidebar</span>(</span>
<span id="cb6-17"><a href="#cb6-17"></a>      <span class="fu">selectInput</span>(</span>
<span id="cb6-18"><a href="#cb6-18"></a>        <span class="st">"state"</span>, <span class="st">"Select a state"</span>,</span>
<span id="cb6-19"><a href="#cb6-19"></a>        <span class="at">choices =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(d<span class="sc">$</span>state))</span>
<span id="cb6-20"><a href="#cb6-20"></a>      ),</span>
<span id="cb6-21"><a href="#cb6-21"></a>      <span class="fu">selectInput</span>(</span>
<span id="cb6-22"><a href="#cb6-22"></a>        <span class="st">"city"</span>, <span class="st">"Select a city"</span>,</span>
<span id="cb6-23"><a href="#cb6-23"></a>        <span class="at">choices =</span> <span class="fu">c</span>(),</span>
<span id="cb6-24"><a href="#cb6-24"></a>        <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb6-25"><a href="#cb6-25"></a>      )</span>
<span id="cb6-26"><a href="#cb6-26"></a>      </span>
<span id="cb6-27"><a href="#cb6-27"></a>    ),</span>
<span id="cb6-28"><a href="#cb6-28"></a>    <span class="fu">dashboardBody</span>( </span>
<span id="cb6-29"><a href="#cb6-29"></a>      <span class="fu">fluidRow</span>(</span>
<span id="cb6-30"><a href="#cb6-30"></a>        <span class="fu">box</span>(</span>
<span id="cb6-31"><a href="#cb6-31"></a>          <span class="at">title =</span> <span class="st">"Forecast"</span>, <span class="at">width =</span> <span class="dv">12</span>,</span>
<span id="cb6-32"><a href="#cb6-32"></a>          <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">status =</span> <span class="st">"primary"</span>,</span>
<span id="cb6-33"><a href="#cb6-33"></a>          <span class="fu">selectInput</span>(</span>
<span id="cb6-34"><a href="#cb6-34"></a>            <span class="st">"var"</span>, <span class="st">"Select a variable"</span>,</span>
<span id="cb6-35"><a href="#cb6-35"></a>            <span class="at">choices =</span> d_vars, <span class="at">selected =</span> <span class="st">"temperature"</span></span>
<span id="cb6-36"><a href="#cb6-36"></a>          ),</span>
<span id="cb6-37"><a href="#cb6-37"></a>          <span class="fu">plotOutput</span>(<span class="st">"plot"</span>)</span>
<span id="cb6-38"><a href="#cb6-38"></a>        )</span>
<span id="cb6-39"><a href="#cb6-39"></a>      ),</span>
<span id="cb6-40"><a href="#cb6-40"></a>      <span class="fu">fluidRow</span>(</span>
<span id="cb6-41"><a href="#cb6-41"></a>        <span class="fu">infoBoxOutput</span>(<span class="st">"min_temp"</span>),</span>
<span id="cb6-42"><a href="#cb6-42"></a>        <span class="fu">infoBoxOutput</span>(<span class="st">"max_temp"</span>),</span>
<span id="cb6-43"><a href="#cb6-43"></a>        <span class="fu">infoBoxOutput</span>(<span class="st">"avg_wind"</span>)</span>
<span id="cb6-44"><a href="#cb6-44"></a>      )</span>
<span id="cb6-45"><a href="#cb6-45"></a>    )</span>
<span id="cb6-46"><a href="#cb6-46"></a>  ),</span>
<span id="cb6-47"><a href="#cb6-47"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb6-48"><a href="#cb6-48"></a>    </span>
<span id="cb6-49"><a href="#cb6-49"></a>    output<span class="sc">$</span>min_temp <span class="ot">=</span> <span class="fu">renderInfoBox</span>({</span>
<span id="cb6-50"><a href="#cb6-50"></a>      min_temp <span class="ot">=</span> <span class="fu">min</span>(<span class="fu">d_city</span>()<span class="sc">$</span>temperature)</span>
<span id="cb6-51"><a href="#cb6-51"></a>      min_temp_time <span class="ot">=</span> <span class="fu">d_city</span>()<span class="sc">$</span>time[<span class="fu">d_city</span>()<span class="sc">$</span>temperature <span class="sc">==</span> min_temp]</span>
<span id="cb6-52"><a href="#cb6-52"></a>      </span>
<span id="cb6-53"><a href="#cb6-53"></a>      <span class="fu">infoBox</span>(</span>
<span id="cb6-54"><a href="#cb6-54"></a>        <span class="at">title =</span> <span class="st">"Min temp"</span>,</span>
<span id="cb6-55"><a href="#cb6-55"></a>        <span class="at">value =</span> min_temp,</span>
<span id="cb6-56"><a href="#cb6-56"></a>        <span class="at">subtitle =</span> <span class="fu">format</span>(min_temp_time, <span class="at">format=</span><span class="st">"%a, %b %d</span><span class="sc">\n</span><span class="st">%I:%M %p"</span>),</span>
<span id="cb6-57"><a href="#cb6-57"></a>        <span class="at">color =</span> <span class="st">"blue"</span>,</span>
<span id="cb6-58"><a href="#cb6-58"></a>        <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">"temperature-low"</span>)</span>
<span id="cb6-59"><a href="#cb6-59"></a>      )</span>
<span id="cb6-60"><a href="#cb6-60"></a>    })</span>
<span id="cb6-61"><a href="#cb6-61"></a>    </span>
<span id="cb6-62"><a href="#cb6-62"></a>    output<span class="sc">$</span>max_temp <span class="ot">=</span> <span class="fu">renderInfoBox</span>({</span>
<span id="cb6-63"><a href="#cb6-63"></a>      max_temp <span class="ot">=</span> <span class="fu">max</span>(<span class="fu">d_city</span>()<span class="sc">$</span>temperature)</span>
<span id="cb6-64"><a href="#cb6-64"></a>      max_temp_time <span class="ot">=</span> <span class="fu">d_city</span>()<span class="sc">$</span>time[<span class="fu">d_city</span>()<span class="sc">$</span>temperature <span class="sc">==</span> max_temp]</span>
<span id="cb6-65"><a href="#cb6-65"></a>      </span>
<span id="cb6-66"><a href="#cb6-66"></a>      <span class="fu">infoBox</span>(</span>
<span id="cb6-67"><a href="#cb6-67"></a>        <span class="at">title =</span> <span class="st">"Max temp"</span>,</span>
<span id="cb6-68"><a href="#cb6-68"></a>        <span class="at">value =</span> max_temp,</span>
<span id="cb6-69"><a href="#cb6-69"></a>        <span class="at">subtitle =</span> <span class="fu">format</span>(max_temp_time, <span class="at">format=</span><span class="st">"%a, %b %d</span><span class="sc">\n</span><span class="st">%I:%M %p"</span>),</span>
<span id="cb6-70"><a href="#cb6-70"></a>        <span class="at">color =</span> <span class="st">"red"</span>,</span>
<span id="cb6-71"><a href="#cb6-71"></a>        <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">"temperature-high"</span>)</span>
<span id="cb6-72"><a href="#cb6-72"></a>      )</span>
<span id="cb6-73"><a href="#cb6-73"></a>    })</span>
<span id="cb6-74"><a href="#cb6-74"></a>    </span>
<span id="cb6-75"><a href="#cb6-75"></a>    output<span class="sc">$</span>avg_wind <span class="ot">=</span> <span class="fu">renderInfoBox</span>({</span>
<span id="cb6-76"><a href="#cb6-76"></a>      avg_wind <span class="ot">=</span> <span class="fu">mean</span>(<span class="fu">d_city</span>()<span class="sc">$</span>windSpeed)</span>
<span id="cb6-77"><a href="#cb6-77"></a>      </span>
<span id="cb6-78"><a href="#cb6-78"></a>      <span class="fu">infoBox</span>(</span>
<span id="cb6-79"><a href="#cb6-79"></a>        <span class="at">title =</span> <span class="st">"Avg wind speed"</span>,</span>
<span id="cb6-80"><a href="#cb6-80"></a>        <span class="at">value =</span> <span class="fu">round</span>(avg_wind,<span class="dv">2</span>),</span>
<span id="cb6-81"><a href="#cb6-81"></a>        <span class="at">color =</span> <span class="st">"green"</span>,</span>
<span id="cb6-82"><a href="#cb6-82"></a>        <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">"wind"</span>)</span>
<span id="cb6-83"><a href="#cb6-83"></a>      )</span>
<span id="cb6-84"><a href="#cb6-84"></a>    })</span>
<span id="cb6-85"><a href="#cb6-85"></a>    </span>
<span id="cb6-86"><a href="#cb6-86"></a>    </span>
<span id="cb6-87"><a href="#cb6-87"></a>    d_city <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb6-88"><a href="#cb6-88"></a>      <span class="fu">req</span>(input<span class="sc">$</span>city)</span>
<span id="cb6-89"><a href="#cb6-89"></a>      d <span class="sc">%&gt;%</span></span>
<span id="cb6-90"><a href="#cb6-90"></a>        <span class="fu">filter</span>(city <span class="sc">%in%</span> input<span class="sc">$</span>city)</span>
<span id="cb6-91"><a href="#cb6-91"></a>    })</span>
<span id="cb6-92"><a href="#cb6-92"></a>    </span>
<span id="cb6-93"><a href="#cb6-93"></a>    <span class="fu">observe</span>({</span>
<span id="cb6-94"><a href="#cb6-94"></a>      cities <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb6-95"><a href="#cb6-95"></a>        <span class="fu">filter</span>(state <span class="sc">%in%</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb6-96"><a href="#cb6-96"></a>        <span class="fu">pull</span>(city) <span class="sc">%&gt;%</span></span>
<span id="cb6-97"><a href="#cb6-97"></a>        <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-98"><a href="#cb6-98"></a>        <span class="fu">sort</span>()</span>
<span id="cb6-99"><a href="#cb6-99"></a>      </span>
<span id="cb6-100"><a href="#cb6-100"></a>      <span class="fu">updateSelectInput</span>(</span>
<span id="cb6-101"><a href="#cb6-101"></a>        <span class="at">inputId =</span> <span class="st">"city"</span>, </span>
<span id="cb6-102"><a href="#cb6-102"></a>        <span class="at">choices =</span> cities</span>
<span id="cb6-103"><a href="#cb6-103"></a>      )</span>
<span id="cb6-104"><a href="#cb6-104"></a>    })</span>
<span id="cb6-105"><a href="#cb6-105"></a>    </span>
<span id="cb6-106"><a href="#cb6-106"></a>    output<span class="sc">$</span>plot <span class="ot">=</span> <span class="fu">renderPlot</span>({</span>
<span id="cb6-107"><a href="#cb6-107"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-108"><a href="#cb6-108"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>.data[[input<span class="sc">$</span>var]], <span class="at">color=</span>city)) <span class="sc">+</span></span>
<span id="cb6-109"><a href="#cb6-109"></a>        <span class="fu">ggtitle</span>(input<span class="sc">$</span>var) <span class="sc">+</span></span>
<span id="cb6-110"><a href="#cb6-110"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb6-111"><a href="#cb6-111"></a>        <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-112"><a href="#cb6-112"></a>        <span class="fu">theme_minimal</span>()</span>
<span id="cb6-113"><a href="#cb6-113"></a>    })</span>
<span id="cb6-114"><a href="#cb6-114"></a>  }</span>
<span id="cb6-115"><a href="#cb6-115"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="shiny-modules" class="title-slide slide level1 center">
<h1>Shiny Modules</h1>

</section>
<section id="dry-again" class="slide level2">
<h2>DRY again</h2>
<p>With the last demo you may have noticed that all three of the infoBoxes had nearly identical code.</p>
<p>As we mentioned yesterday this is something we would like to avoid / minimize wherever possible.</p>
<p>Previously we were able to use a <code>reactive()</code> to remove duplicate code, but that is not possible here since we need three distinct widgets + related server code.</p>
</section>
<section id="modularizing-shiny-code" class="slide level2">
<h2>Modularizing Shiny code</h2>
<p>The general solution to this kind of problem is to use functions to abstract our code.</p>
<p>Within Shiny there are two issues we need to address,</p>
<ul>
<li><p>Our code occurs in both the UI and the server - so we will need to write one function for each</p></li>
<li><p>Shiny inputs and outputs each share a global namespace so when reusing components we need to make sure these ids do not collide.</p></li>
</ul>
</section>
<section id="ui-module" class="slide level2">
<h2>UI module</h2>
<p>Creation of a UI module is straightforward,</p>
<ul>
<li><p>Create a function that takes <code>id</code> as an argument, additional arguments are optional</p></li>
<li><p>The function should return a <code>list()</code> or <code>tagList()</code> of UI elements</p></li>
<li><p>All <code>input*()</code> and <code>*Output()</code> functions must use <code>NS(id)</code> to mangle their <code>inputId</code> or <code>outputId</code>s respectively.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>id <span class="ot">=</span> <span class="st">"widget1"</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>ns <span class="ot">=</span> <span class="fu">NS</span>(id)</span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="fu">ns</span>(<span class="st">"button"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "widget1-button"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="fu">NS</span>(<span class="st">"widget2"</span>, <span class="at">id =</span> <span class="st">"textout"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "widget2-textout"</code></pre>
</div>
</div></li>
</ul>
</section>
<section id="server-module" class="slide level2">
<h2>Server module</h2>
<p>Again start with a function that takes <code>id</code> as an argument, additional arguments are optional and can be static variables or reactives.</p>
<ul>
<li><p>A module’s server function is implemented using (which is returned by the function)</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">moduleServer</span>(</span>
<span id="cb11-2"><a href="#cb11-2"></a>  id,</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="cf">function</span>(input, output, session) {</span>
<span id="cb11-4"><a href="#cb11-4"></a>    ...</span>
<span id="cb11-5"><a href="#cb11-5"></a>  }</span>
<span id="cb11-6"><a href="#cb11-6"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Namespace mangling will be taken care of automatically (except for <code>uiOutput</code>/<code>renderUI</code> in which case the current namespace can be accessed with <code>session$ns</code>)</p></li>
</ul>
</section>
<section id="a-counting-button" class="slide level2">
<h2>A counting button</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-code-line-numbers="|1-6|2,4|8-25|9-24|11-23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>countButtonUI <span class="ot">=</span> <span class="cf">function</span>(id, <span class="at">text =</span> <span class="st">"Initializing"</span>) {</span>
<span id="cb12-2"><a href="#cb12-2"></a>  ns <span class="ot">=</span> <span class="fu">NS</span>(id)</span>
<span id="cb12-3"><a href="#cb12-3"></a>  <span class="fu">tagList</span>(</span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="fu">actionButton</span>(<span class="fu">ns</span>(<span class="st">"button"</span>), <span class="at">label =</span> text, <span class="at">class =</span> <span class="st">"primary"</span>)</span>
<span id="cb12-5"><a href="#cb12-5"></a>  )</span>
<span id="cb12-6"><a href="#cb12-6"></a>}</span>
<span id="cb12-7"><a href="#cb12-7"></a></span>
<span id="cb12-8"><a href="#cb12-8"></a>countButtonServer <span class="ot">=</span> <span class="cf">function</span>(id, <span class="at">prefix =</span> <span class="st">"Clicked: "</span>) {</span>
<span id="cb12-9"><a href="#cb12-9"></a>  <span class="fu">moduleServer</span>(</span>
<span id="cb12-10"><a href="#cb12-10"></a>    id,</span>
<span id="cb12-11"><a href="#cb12-11"></a>    <span class="cf">function</span>(input, output, session) {</span>
<span id="cb12-12"><a href="#cb12-12"></a>      count <span class="ot">=</span> <span class="fu">reactiveVal</span>(<span class="dv">0</span>)</span>
<span id="cb12-13"><a href="#cb12-13"></a>      <span class="fu">observe</span>({</span>
<span id="cb12-14"><a href="#cb12-14"></a>        <span class="fu">count</span>(<span class="fu">count</span>() <span class="sc">+</span> <span class="dv">1</span>)</span>
<span id="cb12-15"><a href="#cb12-15"></a>      }) <span class="sc">%&gt;%</span></span>
<span id="cb12-16"><a href="#cb12-16"></a>        <span class="fu">bindEvent</span>(input<span class="sc">$</span>button)</span>
<span id="cb12-17"><a href="#cb12-17"></a>      </span>
<span id="cb12-18"><a href="#cb12-18"></a>      <span class="fu">observe</span>({</span>
<span id="cb12-19"><a href="#cb12-19"></a>        <span class="fu">updateActionButton</span>(</span>
<span id="cb12-20"><a href="#cb12-20"></a>          <span class="at">inputId =</span> <span class="st">"button"</span>, <span class="at">label =</span> <span class="fu">paste0</span>(prefix, <span class="fu">count</span>()),</span>
<span id="cb12-21"><a href="#cb12-21"></a>        )</span>
<span id="cb12-22"><a href="#cb12-22"></a>      })</span>
<span id="cb12-23"><a href="#cb12-23"></a>    }</span>
<span id="cb12-24"><a href="#cb12-24"></a>  )</span>
<span id="cb12-25"><a href="#cb12-25"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="putting-it-together" class="slide level2">
<h2>Putting it together</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">shinyApp</span>(</span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="fu">countButtonUI</span>(<span class="st">"count1"</span>),</span>
<span id="cb13-4"><a href="#cb13-4"></a>    <span class="fu">countButtonUI</span>(<span class="st">"count2"</span>),</span>
<span id="cb13-5"><a href="#cb13-5"></a>    <span class="fu">countButtonUI</span>(<span class="st">"count3"</span>)</span>
<span id="cb13-6"><a href="#cb13-6"></a>  ),</span>
<span id="cb13-7"><a href="#cb13-7"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb13-8"><a href="#cb13-8"></a>    <span class="fu">countButtonServer</span>(<span class="st">"count1"</span>)</span>
<span id="cb13-9"><a href="#cb13-9"></a>    <span class="fu">countButtonServer</span>(<span class="st">"count2"</span>)</span>
<span id="cb13-10"><a href="#cb13-10"></a>    <span class="fu">countButtonServer</span>(<span class="st">"count3"</span>)</span>
<span id="cb13-11"><a href="#cb13-11"></a>  }</span>
<span id="cb13-12"><a href="#cb13-12"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="demo-10---dynamic-box-module" class="slide level2">
<h2>Demo 10 - Dynamic box module</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo10.R</code></p>
</div>
<div class="cell" data-file="../demos/demo10.R">
<div class="sourceCode cell-code" id="cb14" data-code-line-numbers="|11-13|15-35|76-80|82-86|88-92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="fu">library</span>(shinydashboard)</span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a>d <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb14-6"><a href="#cb14-6"></a></span>
<span id="cb14-7"><a href="#cb14-7"></a>d_vars <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb14-9"><a href="#cb14-9"></a>  <span class="fu">names</span>()</span>
<span id="cb14-10"><a href="#cb14-10"></a></span>
<span id="cb14-11"><a href="#cb14-11"></a>weatherBoxUI <span class="ot">=</span> <span class="cf">function</span>(id) {</span>
<span id="cb14-12"><a href="#cb14-12"></a>  <span class="fu">infoBoxOutput</span>(<span class="fu">NS</span>(id, <span class="st">"info"</span>))</span>
<span id="cb14-13"><a href="#cb14-13"></a>}</span>
<span id="cb14-14"><a href="#cb14-14"></a></span>
<span id="cb14-15"><a href="#cb14-15"></a>weatherBoxServer <span class="ot">=</span> <span class="cf">function</span>(id, data, var, func, text, color, icon, <span class="at">show_time =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb14-16"><a href="#cb14-16"></a>  <span class="fu">moduleServer</span>(</span>
<span id="cb14-17"><a href="#cb14-17"></a>    id,</span>
<span id="cb14-18"><a href="#cb14-18"></a>    <span class="cf">function</span>(input, output, session) {</span>
<span id="cb14-19"><a href="#cb14-19"></a>      output<span class="sc">$</span>info <span class="ot">=</span> <span class="fu">renderInfoBox</span>({</span>
<span id="cb14-20"><a href="#cb14-20"></a>        val <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">func</span>(<span class="fu">data</span>()[[var]]),<span class="dv">2</span>)</span>
<span id="cb14-21"><a href="#cb14-21"></a>        time <span class="ot">=</span> <span class="cf">if</span> (show_time) {</span>
<span id="cb14-22"><a href="#cb14-22"></a>          <span class="fu">data</span>()<span class="sc">$</span>time[<span class="fu">data</span>()[[var]] <span class="sc">==</span> val] <span class="sc">%&gt;%</span></span>
<span id="cb14-23"><a href="#cb14-23"></a>            <span class="fu">format</span>(<span class="at">format=</span><span class="st">"%a, %b %d</span><span class="sc">\n</span><span class="st">%I:%M %p"</span>)</span>
<span id="cb14-24"><a href="#cb14-24"></a>        } <span class="cf">else</span> {</span>
<span id="cb14-25"><a href="#cb14-25"></a>          <span class="st">""</span></span>
<span id="cb14-26"><a href="#cb14-26"></a>        }</span>
<span id="cb14-27"><a href="#cb14-27"></a>        </span>
<span id="cb14-28"><a href="#cb14-28"></a>        <span class="fu">infoBox</span>(</span>
<span id="cb14-29"><a href="#cb14-29"></a>          <span class="at">title =</span> text, <span class="at">value =</span> val, <span class="at">subtitle =</span> time,</span>
<span id="cb14-30"><a href="#cb14-30"></a>          <span class="at">color =</span> color, <span class="at">icon =</span> icon</span>
<span id="cb14-31"><a href="#cb14-31"></a>        )</span>
<span id="cb14-32"><a href="#cb14-32"></a>      })</span>
<span id="cb14-33"><a href="#cb14-33"></a>    }</span>
<span id="cb14-34"><a href="#cb14-34"></a>  )</span>
<span id="cb14-35"><a href="#cb14-35"></a>}</span>
<span id="cb14-36"><a href="#cb14-36"></a></span>
<span id="cb14-37"><a href="#cb14-37"></a></span>
<span id="cb14-38"><a href="#cb14-38"></a><span class="fu">shinyApp</span>(</span>
<span id="cb14-39"><a href="#cb14-39"></a>  <span class="at">ui =</span> <span class="fu">dashboardPage</span>(</span>
<span id="cb14-40"><a href="#cb14-40"></a>    <span class="fu">dashboardHeader</span>(</span>
<span id="cb14-41"><a href="#cb14-41"></a>      <span class="at">title =</span><span class="st">"Weather Forecasts"</span></span>
<span id="cb14-42"><a href="#cb14-42"></a>    ),</span>
<span id="cb14-43"><a href="#cb14-43"></a>    <span class="fu">dashboardSidebar</span>(</span>
<span id="cb14-44"><a href="#cb14-44"></a>      <span class="fu">selectInput</span>(</span>
<span id="cb14-45"><a href="#cb14-45"></a>        <span class="st">"state"</span>, <span class="st">"Select a state"</span>,</span>
<span id="cb14-46"><a href="#cb14-46"></a>        <span class="at">choices =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(d<span class="sc">$</span>state))</span>
<span id="cb14-47"><a href="#cb14-47"></a>      ),</span>
<span id="cb14-48"><a href="#cb14-48"></a>      <span class="fu">selectInput</span>(</span>
<span id="cb14-49"><a href="#cb14-49"></a>        <span class="st">"city"</span>, <span class="st">"Select a city"</span>,</span>
<span id="cb14-50"><a href="#cb14-50"></a>        <span class="at">choices =</span> <span class="fu">c</span>(),</span>
<span id="cb14-51"><a href="#cb14-51"></a>        <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb14-52"><a href="#cb14-52"></a>      )</span>
<span id="cb14-53"><a href="#cb14-53"></a>      </span>
<span id="cb14-54"><a href="#cb14-54"></a>    ),</span>
<span id="cb14-55"><a href="#cb14-55"></a>    <span class="fu">dashboardBody</span>( </span>
<span id="cb14-56"><a href="#cb14-56"></a>      <span class="fu">fluidRow</span>(</span>
<span id="cb14-57"><a href="#cb14-57"></a>        <span class="fu">box</span>(</span>
<span id="cb14-58"><a href="#cb14-58"></a>          <span class="at">title =</span> <span class="st">"Forecast"</span>, <span class="at">width =</span> <span class="dv">12</span>,</span>
<span id="cb14-59"><a href="#cb14-59"></a>          <span class="at">solidHeader =</span> <span class="cn">TRUE</span>, <span class="at">status =</span> <span class="st">"primary"</span>,</span>
<span id="cb14-60"><a href="#cb14-60"></a>          <span class="fu">selectInput</span>(</span>
<span id="cb14-61"><a href="#cb14-61"></a>            <span class="st">"var"</span>, <span class="st">"Select a variable"</span>,</span>
<span id="cb14-62"><a href="#cb14-62"></a>            <span class="at">choices =</span> d_vars, <span class="at">selected =</span> <span class="st">"temperature"</span></span>
<span id="cb14-63"><a href="#cb14-63"></a>          ),</span>
<span id="cb14-64"><a href="#cb14-64"></a>          <span class="fu">plotOutput</span>(<span class="st">"plot"</span>)</span>
<span id="cb14-65"><a href="#cb14-65"></a>        )</span>
<span id="cb14-66"><a href="#cb14-66"></a>      ),</span>
<span id="cb14-67"><a href="#cb14-67"></a>      <span class="fu">fluidRow</span>(</span>
<span id="cb14-68"><a href="#cb14-68"></a>        <span class="fu">weatherBoxUI</span>(<span class="st">"min_temp"</span>),</span>
<span id="cb14-69"><a href="#cb14-69"></a>        <span class="fu">weatherBoxUI</span>(<span class="st">"max_temp"</span>),</span>
<span id="cb14-70"><a href="#cb14-70"></a>        <span class="fu">weatherBoxUI</span>(<span class="st">"avg_wind"</span>)</span>
<span id="cb14-71"><a href="#cb14-71"></a>      )</span>
<span id="cb14-72"><a href="#cb14-72"></a>    )</span>
<span id="cb14-73"><a href="#cb14-73"></a>  ),</span>
<span id="cb14-74"><a href="#cb14-74"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb14-75"><a href="#cb14-75"></a>    </span>
<span id="cb14-76"><a href="#cb14-76"></a>    <span class="fu">weatherBoxServer</span>(</span>
<span id="cb14-77"><a href="#cb14-77"></a>      <span class="st">"min_temp"</span>, <span class="at">data =</span> d_city, <span class="at">var =</span> <span class="st">"temperature"</span>, <span class="at">func =</span> min, </span>
<span id="cb14-78"><a href="#cb14-78"></a>      <span class="at">text =</span> <span class="st">"Min temp"</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">"temperature-low"</span>),</span>
<span id="cb14-79"><a href="#cb14-79"></a>      <span class="at">show_time =</span> <span class="cn">TRUE</span></span>
<span id="cb14-80"><a href="#cb14-80"></a>    )</span>
<span id="cb14-81"><a href="#cb14-81"></a>    </span>
<span id="cb14-82"><a href="#cb14-82"></a>    <span class="fu">weatherBoxServer</span>(</span>
<span id="cb14-83"><a href="#cb14-83"></a>      <span class="st">"max_temp"</span>, <span class="at">data =</span> d_city , <span class="at">var =</span> <span class="st">"temperature"</span>, <span class="at">func =</span> max, </span>
<span id="cb14-84"><a href="#cb14-84"></a>      <span class="at">text =</span> <span class="st">"Max temp"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">"temperature-high"</span>),</span>
<span id="cb14-85"><a href="#cb14-85"></a>      <span class="at">show_time =</span> <span class="cn">TRUE</span></span>
<span id="cb14-86"><a href="#cb14-86"></a>    )</span>
<span id="cb14-87"><a href="#cb14-87"></a>    </span>
<span id="cb14-88"><a href="#cb14-88"></a>    <span class="fu">weatherBoxServer</span>(</span>
<span id="cb14-89"><a href="#cb14-89"></a>      <span class="st">"avg_wind"</span>, <span class="at">data =</span> d_city, <span class="at">var =</span> <span class="st">"windSpeed"</span>, <span class="at">func =</span> mean, </span>
<span id="cb14-90"><a href="#cb14-90"></a>      <span class="at">text =</span> <span class="st">"Avg wind"</span>, <span class="at">color =</span> <span class="st">"green"</span>, <span class="at">icon =</span> <span class="fu">icon</span>(<span class="st">"wind"</span>),</span>
<span id="cb14-91"><a href="#cb14-91"></a>      <span class="at">show_time =</span> <span class="cn">FALSE</span></span>
<span id="cb14-92"><a href="#cb14-92"></a>    )</span>
<span id="cb14-93"><a href="#cb14-93"></a>    </span>
<span id="cb14-94"><a href="#cb14-94"></a>    d_city <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb14-95"><a href="#cb14-95"></a>      <span class="fu">req</span>(input<span class="sc">$</span>city)</span>
<span id="cb14-96"><a href="#cb14-96"></a>      d <span class="sc">%&gt;%</span></span>
<span id="cb14-97"><a href="#cb14-97"></a>        <span class="fu">filter</span>(city <span class="sc">%in%</span> input<span class="sc">$</span>city)</span>
<span id="cb14-98"><a href="#cb14-98"></a>    })</span>
<span id="cb14-99"><a href="#cb14-99"></a>    </span>
<span id="cb14-100"><a href="#cb14-100"></a>    <span class="fu">observe</span>({</span>
<span id="cb14-101"><a href="#cb14-101"></a>      cities <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb14-102"><a href="#cb14-102"></a>        <span class="fu">filter</span>(state <span class="sc">%in%</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb14-103"><a href="#cb14-103"></a>        <span class="fu">pull</span>(city) <span class="sc">%&gt;%</span></span>
<span id="cb14-104"><a href="#cb14-104"></a>        <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-105"><a href="#cb14-105"></a>        <span class="fu">sort</span>()</span>
<span id="cb14-106"><a href="#cb14-106"></a>      </span>
<span id="cb14-107"><a href="#cb14-107"></a>      <span class="fu">updateSelectInput</span>(</span>
<span id="cb14-108"><a href="#cb14-108"></a>        <span class="at">inputId =</span> <span class="st">"city"</span>, </span>
<span id="cb14-109"><a href="#cb14-109"></a>        <span class="at">choices =</span> cities</span>
<span id="cb14-110"><a href="#cb14-110"></a>      )</span>
<span id="cb14-111"><a href="#cb14-111"></a>    })</span>
<span id="cb14-112"><a href="#cb14-112"></a>    </span>
<span id="cb14-113"><a href="#cb14-113"></a>    output<span class="sc">$</span>plot <span class="ot">=</span> <span class="fu">renderPlot</span>({</span>
<span id="cb14-114"><a href="#cb14-114"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-115"><a href="#cb14-115"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>.data[[input<span class="sc">$</span>var]], <span class="at">color=</span>city)) <span class="sc">+</span></span>
<span id="cb14-116"><a href="#cb14-116"></a>        <span class="fu">ggtitle</span>(input<span class="sc">$</span>var) <span class="sc">+</span></span>
<span id="cb14-117"><a href="#cb14-117"></a>        <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb14-118"><a href="#cb14-118"></a>        <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb14-119"><a href="#cb14-119"></a>        <span class="fu">theme_minimal</span>()</span>
<span id="cb14-120"><a href="#cb14-120"></a>    })</span>
<span id="cb14-121"><a href="#cb14-121"></a>  }</span>
<span id="cb14-122"><a href="#cb14-122"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="theming" class="title-slide slide level1 center">
<h1>Theming</h1>

</section>
<section id="shiny-bootstrap" class="slide level2">
<h2>Shiny &amp; bootstrap</h2>
<p>The interface provided by Shiny is based on the html elements, styling, and javascript provided by the <a href="https://getbootstrap.com/">Bootstrap library</a>.</p>
<p>As we’ve seen so far, knowing the specifics of Bootstrap are not needed for working with Shiny - but understanding some of its conventions goes a long way to helping you customize the elements of your app (via custom CSS and other components).</p>
<p>This is not the only place that Bootstrap shows up in the R ecosystem - e.g.&nbsp;both RMarkdown and Quarto html documents use Bootstrap for styling as well.</p>
</section>
<section id="bootswatch" class="slide level2">
<h2>Bootswatch</h2>
<p>Due to the ubiquity of Bootstrap a large amount of community effort has gone into developing custom themes - a large free collection of these are avaiable at <a href="https://bootswatch.com/">bootswatch.com/</a>.</p>
<iframe data-src="https://bootswatch.com/" width="100%" height="450px" style="border:1px solid;border-radius: 5px;">
</iframe>
</section>
<section id="bslib" class="slide level2">
<h2>bslib</h2>
<blockquote>
<p>The bslib R package provides tools for customizing Bootstrap themes directly from R, making it much easier to customize the appearance of Shiny apps &amp; R Markdown documents. bslib’s primary goals are:</p>
<ul>
<li><p>Make custom theming as easy as possible.</p>
<ul>
<li>Custom themes may even be created interactively in real-time.</li>
</ul></li>
<li><p>Also provide easy access to pre-packaged Bootswatch themes.</p></li>
<li><p>Make upgrading from Bootstrap 3 to 4 (and beyond) as seamless as possible.</p></li>
<li><p>Serve as a general foundation for Shiny and R Markdown extension packages.</p></li>
</ul>
</blockquote>
</section>
<section id="bs_theme" class="slide level2">
<h2><code>bs_theme()</code></h2>
<p>Provides a high level interface to adjusting the theme for an entire Shiny app,</p>
<ul>
<li><p>Change bootstrap version via <code>version</code> argument</p></li>
<li><p>Pick a bootswatch theme via <code>bootswatch</code> argument</p></li>
<li><p>Adjust basic color palette (<code>bg</code>, <code>fg</code>, <code>primary</code>, <code>secondary</code>, etc.)</p></li>
<li><p>Adjust fonts (<code>base_font</code>, <code>code_font</code>, <code>heading_font</code>, <code>font_scale</code>)</p></li>
<li><p>and more</p></li>
</ul>
<p>The object returned by <code>bs_theme()</code> can be passed to the <code>theme</code> argument of <code>fluidPage()</code> and similar page UI elements.</p>
</section>
<section id="your-turn---exercise-7" class="slide level2">
<h2>Your turn - Exercise 7</h2>
<p>Again starting with the app version from Demo 5 (code available in <code>exercises/ex7.R</code>) use bslib to add a theme to your Shiny app using <code>bs_theme()</code>.</p>
<ul>
<li><p>Try changing the bootstrap version (3, 4, and 5) and see what happens.</p></li>
<li><p>Try picking out a couple of bootswatch themes and try applying them to the app.</p>
<ul>
<li>Check the website for options or see <code>bslib::bootswatch_themes()</code></li>
</ul></li>
</ul>
<p><countdown time="450"></countdown></p>
</section>
<section id="demo-11---interactive-theming" class="slide level2">
<h2>Demo 11 - Interactive theming</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo11.R</code></p>
</div>
<div class="cell" data-file="../demos/demo11.R">
<div class="sourceCode cell-code" id="cb15" data-code-line-numbers="|13|45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb15-2"><a href="#cb15-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="fu">library</span>(bslib)</span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a>d <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb15-6"><a href="#cb15-6"></a></span>
<span id="cb15-7"><a href="#cb15-7"></a>d_vars <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="#cb15-8"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="#cb15-9"></a>  <span class="fu">names</span>()</span>
<span id="cb15-10"><a href="#cb15-10"></a></span>
<span id="cb15-11"><a href="#cb15-11"></a><span class="fu">shinyApp</span>(</span>
<span id="cb15-12"><a href="#cb15-12"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb15-13"><a href="#cb15-13"></a>    <span class="at">theme =</span> <span class="fu">bs_theme</span>(),</span>
<span id="cb15-14"><a href="#cb15-14"></a>    <span class="fu">titlePanel</span>(<span class="st">"Weather Forecasts"</span>),</span>
<span id="cb15-15"><a href="#cb15-15"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb15-16"><a href="#cb15-16"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb15-17"><a href="#cb15-17"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb15-18"><a href="#cb15-18"></a>          <span class="st">"state"</span>, <span class="st">"Select a state"</span>,</span>
<span id="cb15-19"><a href="#cb15-19"></a>          <span class="at">choices =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(d<span class="sc">$</span>state))</span>
<span id="cb15-20"><a href="#cb15-20"></a>        ),</span>
<span id="cb15-21"><a href="#cb15-21"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb15-22"><a href="#cb15-22"></a>          <span class="st">"city"</span>, <span class="st">"Select a city"</span>,</span>
<span id="cb15-23"><a href="#cb15-23"></a>          <span class="at">choices =</span> <span class="fu">c</span>(),</span>
<span id="cb15-24"><a href="#cb15-24"></a>          <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb15-25"><a href="#cb15-25"></a>        ),</span>
<span id="cb15-26"><a href="#cb15-26"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb15-27"><a href="#cb15-27"></a>          <span class="st">"var"</span>, <span class="st">"Select a variable"</span>,</span>
<span id="cb15-28"><a href="#cb15-28"></a>          <span class="at">choices =</span> d_vars, <span class="at">selected =</span> <span class="st">"temperature"</span></span>
<span id="cb15-29"><a href="#cb15-29"></a>        )</span>
<span id="cb15-30"><a href="#cb15-30"></a>      ),</span>
<span id="cb15-31"><a href="#cb15-31"></a>      <span class="fu">mainPanel</span>( </span>
<span id="cb15-32"><a href="#cb15-32"></a>        <span class="fu">plotOutput</span>(<span class="st">"plot"</span>),</span>
<span id="cb15-33"><a href="#cb15-33"></a>        <span class="fu">tableOutput</span>(<span class="st">"minmax"</span>),</span>
<span id="cb15-34"><a href="#cb15-34"></a>        </span>
<span id="cb15-35"><a href="#cb15-35"></a>        <span class="fu">actionButton</span>(<span class="st">"b1"</span>, <span class="st">"primary"</span>, <span class="at">class =</span> <span class="st">"btn-primary"</span>),</span>
<span id="cb15-36"><a href="#cb15-36"></a>        <span class="fu">actionButton</span>(<span class="st">"b2"</span>, <span class="st">"secondary"</span>, <span class="at">class =</span> <span class="st">"btn-secondary"</span>),</span>
<span id="cb15-37"><a href="#cb15-37"></a>        <span class="fu">actionButton</span>(<span class="st">"b3"</span>, <span class="st">"success"</span>, <span class="at">class =</span> <span class="st">"btn-success"</span>),</span>
<span id="cb15-38"><a href="#cb15-38"></a>        <span class="fu">actionButton</span>(<span class="st">"b4"</span>, <span class="st">"info"</span>, <span class="at">class =</span> <span class="st">"btn-info"</span>),</span>
<span id="cb15-39"><a href="#cb15-39"></a>        <span class="fu">actionButton</span>(<span class="st">"b5"</span>, <span class="st">"warning"</span>, <span class="at">class =</span> <span class="st">"btn-warning"</span>),</span>
<span id="cb15-40"><a href="#cb15-40"></a>        <span class="fu">actionButton</span>(<span class="st">"b6"</span>, <span class="st">"danger"</span>, <span class="at">class =</span> <span class="st">"btn-danger"</span>)</span>
<span id="cb15-41"><a href="#cb15-41"></a>      )</span>
<span id="cb15-42"><a href="#cb15-42"></a>    )</span>
<span id="cb15-43"><a href="#cb15-43"></a>  ),</span>
<span id="cb15-44"><a href="#cb15-44"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb15-45"><a href="#cb15-45"></a>    <span class="fu">bs_themer</span>()</span>
<span id="cb15-46"><a href="#cb15-46"></a>    </span>
<span id="cb15-47"><a href="#cb15-47"></a>    d_city <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb15-48"><a href="#cb15-48"></a>      <span class="fu">req</span>(input<span class="sc">$</span>city)</span>
<span id="cb15-49"><a href="#cb15-49"></a>      d <span class="sc">%&gt;%</span></span>
<span id="cb15-50"><a href="#cb15-50"></a>        <span class="fu">filter</span>(city <span class="sc">%in%</span> input<span class="sc">$</span>city)</span>
<span id="cb15-51"><a href="#cb15-51"></a>    })</span>
<span id="cb15-52"><a href="#cb15-52"></a>    </span>
<span id="cb15-53"><a href="#cb15-53"></a>    <span class="fu">observe</span>({</span>
<span id="cb15-54"><a href="#cb15-54"></a>      cities <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb15-55"><a href="#cb15-55"></a>        <span class="fu">filter</span>(state <span class="sc">%in%</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb15-56"><a href="#cb15-56"></a>        <span class="fu">pull</span>(city) <span class="sc">%&gt;%</span></span>
<span id="cb15-57"><a href="#cb15-57"></a>        <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-58"><a href="#cb15-58"></a>        <span class="fu">sort</span>()</span>
<span id="cb15-59"><a href="#cb15-59"></a>      </span>
<span id="cb15-60"><a href="#cb15-60"></a>      <span class="fu">updateSelectInput</span>(</span>
<span id="cb15-61"><a href="#cb15-61"></a>        <span class="at">inputId =</span> <span class="st">"city"</span>, </span>
<span id="cb15-62"><a href="#cb15-62"></a>        <span class="at">choices =</span> cities</span>
<span id="cb15-63"><a href="#cb15-63"></a>      )</span>
<span id="cb15-64"><a href="#cb15-64"></a>    })</span>
<span id="cb15-65"><a href="#cb15-65"></a>    </span>
<span id="cb15-66"><a href="#cb15-66"></a>    output<span class="sc">$</span>plot <span class="ot">=</span> <span class="fu">renderPlot</span>({</span>
<span id="cb15-67"><a href="#cb15-67"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-68"><a href="#cb15-68"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>.data[[input<span class="sc">$</span>var]], <span class="at">color=</span>city)) <span class="sc">+</span></span>
<span id="cb15-69"><a href="#cb15-69"></a>        <span class="fu">ggtitle</span>(input<span class="sc">$</span>var) <span class="sc">+</span></span>
<span id="cb15-70"><a href="#cb15-70"></a>        <span class="fu">geom_line</span>()</span>
<span id="cb15-71"><a href="#cb15-71"></a>    })</span>
<span id="cb15-72"><a href="#cb15-72"></a>    </span>
<span id="cb15-73"><a href="#cb15-73"></a>    output<span class="sc">$</span>minmax <span class="ot">=</span> <span class="fu">renderTable</span>({</span>
<span id="cb15-74"><a href="#cb15-74"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-75"><a href="#cb15-75"></a>        <span class="fu">mutate</span>(</span>
<span id="cb15-76"><a href="#cb15-76"></a>          <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">wday</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb15-77"><a href="#cb15-77"></a>          <span class="at">date =</span> <span class="fu">as.character</span>(lubridate<span class="sc">::</span><span class="fu">date</span>(time))</span>
<span id="cb15-78"><a href="#cb15-78"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb15-79"><a href="#cb15-79"></a>        <span class="fu">group_by</span>(date, day) <span class="sc">%&gt;%</span></span>
<span id="cb15-80"><a href="#cb15-80"></a>        <span class="fu">summarize</span>(</span>
<span id="cb15-81"><a href="#cb15-81"></a>          <span class="st">`</span><span class="at">min</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">min</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb15-82"><a href="#cb15-82"></a>          <span class="st">`</span><span class="at">max</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">max</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb15-83"><a href="#cb15-83"></a>          <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb15-84"><a href="#cb15-84"></a>        )</span>
<span id="cb15-85"><a href="#cb15-85"></a>    })</span>
<span id="cb15-86"><a href="#cb15-86"></a>  }</span>
<span id="cb15-87"><a href="#cb15-87"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="demo-12---dynamic-theming" class="slide level2">
<h2>Demo 12 - Dynamic theming</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo12.R</code></p>
</div>
<div class="cell" data-file="../demos/demo12.R">
<div class="sourceCode cell-code" id="cb16" data-code-line-numbers="|11,12|16|49-52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="fu">library</span>(bslib)</span>
<span id="cb16-4"><a href="#cb16-4"></a></span>
<span id="cb16-5"><a href="#cb16-5"></a>d <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb16-6"><a href="#cb16-6"></a></span>
<span id="cb16-7"><a href="#cb16-7"></a>d_vars <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>  <span class="fu">names</span>()</span>
<span id="cb16-10"><a href="#cb16-10"></a></span>
<span id="cb16-11"><a href="#cb16-11"></a>light <span class="ot">=</span> <span class="fu">bs_theme</span>(<span class="at">version =</span> <span class="dv">5</span>)</span>
<span id="cb16-12"><a href="#cb16-12"></a>dark <span class="ot">=</span> <span class="fu">bs_theme</span>(<span class="at">version =</span> <span class="dv">5</span>, <span class="at">bg =</span> <span class="st">"black"</span>, <span class="at">fg =</span> <span class="st">"white"</span>, <span class="at">primary =</span> <span class="st">"purple"</span>)</span>
<span id="cb16-13"><a href="#cb16-13"></a></span>
<span id="cb16-14"><a href="#cb16-14"></a><span class="fu">shinyApp</span>(</span>
<span id="cb16-15"><a href="#cb16-15"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb16-16"><a href="#cb16-16"></a>    <span class="at">theme =</span> light,</span>
<span id="cb16-17"><a href="#cb16-17"></a>    <span class="fu">titlePanel</span>(<span class="st">"Weather Forecasts"</span>),</span>
<span id="cb16-18"><a href="#cb16-18"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb16-19"><a href="#cb16-19"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb16-20"><a href="#cb16-20"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb16-21"><a href="#cb16-21"></a>          <span class="st">"state"</span>, <span class="st">"Select a state"</span>,</span>
<span id="cb16-22"><a href="#cb16-22"></a>          <span class="at">choices =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(d<span class="sc">$</span>state))</span>
<span id="cb16-23"><a href="#cb16-23"></a>        ),</span>
<span id="cb16-24"><a href="#cb16-24"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb16-25"><a href="#cb16-25"></a>          <span class="st">"city"</span>, <span class="st">"Select a city"</span>,</span>
<span id="cb16-26"><a href="#cb16-26"></a>          <span class="at">choices =</span> <span class="fu">c</span>(),</span>
<span id="cb16-27"><a href="#cb16-27"></a>          <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb16-28"><a href="#cb16-28"></a>        ),</span>
<span id="cb16-29"><a href="#cb16-29"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb16-30"><a href="#cb16-30"></a>          <span class="st">"var"</span>, <span class="st">"Select a variable"</span>,</span>
<span id="cb16-31"><a href="#cb16-31"></a>          <span class="at">choices =</span> d_vars, <span class="at">selected =</span> <span class="st">"temperature"</span></span>
<span id="cb16-32"><a href="#cb16-32"></a>        ),</span>
<span id="cb16-33"><a href="#cb16-33"></a>        <span class="fu">checkboxInput</span>(<span class="st">"dark_mode"</span>, <span class="st">"Dark mode"</span>)</span>
<span id="cb16-34"><a href="#cb16-34"></a>      ),</span>
<span id="cb16-35"><a href="#cb16-35"></a>      <span class="fu">mainPanel</span>( </span>
<span id="cb16-36"><a href="#cb16-36"></a>        <span class="fu">plotOutput</span>(<span class="st">"plot"</span>),</span>
<span id="cb16-37"><a href="#cb16-37"></a>        <span class="fu">tableOutput</span>(<span class="st">"minmax"</span>),</span>
<span id="cb16-38"><a href="#cb16-38"></a>        </span>
<span id="cb16-39"><a href="#cb16-39"></a>        <span class="fu">actionButton</span>(<span class="st">"b1"</span>, <span class="st">"primary"</span>, <span class="at">class =</span> <span class="st">"btn-primary"</span>),</span>
<span id="cb16-40"><a href="#cb16-40"></a>        <span class="fu">actionButton</span>(<span class="st">"b2"</span>, <span class="st">"secondary"</span>, <span class="at">class =</span> <span class="st">"btn-secondary"</span>),</span>
<span id="cb16-41"><a href="#cb16-41"></a>        <span class="fu">actionButton</span>(<span class="st">"b3"</span>, <span class="st">"success"</span>, <span class="at">class =</span> <span class="st">"btn-success"</span>),</span>
<span id="cb16-42"><a href="#cb16-42"></a>        <span class="fu">actionButton</span>(<span class="st">"b4"</span>, <span class="st">"info"</span>, <span class="at">class =</span> <span class="st">"btn-info"</span>),</span>
<span id="cb16-43"><a href="#cb16-43"></a>        <span class="fu">actionButton</span>(<span class="st">"b5"</span>, <span class="st">"warning"</span>, <span class="at">class =</span> <span class="st">"btn-warning"</span>),</span>
<span id="cb16-44"><a href="#cb16-44"></a>        <span class="fu">actionButton</span>(<span class="st">"b6"</span>, <span class="st">"danger"</span>, <span class="at">class =</span> <span class="st">"btn-danger"</span>)</span>
<span id="cb16-45"><a href="#cb16-45"></a>      )</span>
<span id="cb16-46"><a href="#cb16-46"></a>    )</span>
<span id="cb16-47"><a href="#cb16-47"></a>  ),</span>
<span id="cb16-48"><a href="#cb16-48"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb16-49"><a href="#cb16-49"></a>    <span class="fu">observe</span>({</span>
<span id="cb16-50"><a href="#cb16-50"></a>      new_theme <span class="ot">=</span> <span class="cf">if</span> (input<span class="sc">$</span>dark_mode) dark <span class="cf">else</span> light</span>
<span id="cb16-51"><a href="#cb16-51"></a>      session<span class="sc">$</span><span class="fu">setCurrentTheme</span>(new_theme)</span>
<span id="cb16-52"><a href="#cb16-52"></a>    })</span>
<span id="cb16-53"><a href="#cb16-53"></a>    </span>
<span id="cb16-54"><a href="#cb16-54"></a>    d_city <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb16-55"><a href="#cb16-55"></a>      <span class="fu">req</span>(input<span class="sc">$</span>city)</span>
<span id="cb16-56"><a href="#cb16-56"></a>      d <span class="sc">%&gt;%</span></span>
<span id="cb16-57"><a href="#cb16-57"></a>        <span class="fu">filter</span>(city <span class="sc">%in%</span> input<span class="sc">$</span>city)</span>
<span id="cb16-58"><a href="#cb16-58"></a>    })</span>
<span id="cb16-59"><a href="#cb16-59"></a>    </span>
<span id="cb16-60"><a href="#cb16-60"></a>    <span class="fu">observe</span>({</span>
<span id="cb16-61"><a href="#cb16-61"></a>      cities <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb16-62"><a href="#cb16-62"></a>        <span class="fu">filter</span>(state <span class="sc">%in%</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb16-63"><a href="#cb16-63"></a>        <span class="fu">pull</span>(city) <span class="sc">%&gt;%</span></span>
<span id="cb16-64"><a href="#cb16-64"></a>        <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-65"><a href="#cb16-65"></a>        <span class="fu">sort</span>()</span>
<span id="cb16-66"><a href="#cb16-66"></a>      </span>
<span id="cb16-67"><a href="#cb16-67"></a>      <span class="fu">updateSelectInput</span>(</span>
<span id="cb16-68"><a href="#cb16-68"></a>        <span class="at">inputId =</span> <span class="st">"city"</span>, </span>
<span id="cb16-69"><a href="#cb16-69"></a>        <span class="at">choices =</span> cities</span>
<span id="cb16-70"><a href="#cb16-70"></a>      )</span>
<span id="cb16-71"><a href="#cb16-71"></a>    })</span>
<span id="cb16-72"><a href="#cb16-72"></a>    </span>
<span id="cb16-73"><a href="#cb16-73"></a>    output<span class="sc">$</span>plot <span class="ot">=</span> <span class="fu">renderPlot</span>({</span>
<span id="cb16-74"><a href="#cb16-74"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-75"><a href="#cb16-75"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>.data[[input<span class="sc">$</span>var]], <span class="at">color=</span>city)) <span class="sc">+</span></span>
<span id="cb16-76"><a href="#cb16-76"></a>        <span class="fu">ggtitle</span>(input<span class="sc">$</span>var) <span class="sc">+</span></span>
<span id="cb16-77"><a href="#cb16-77"></a>        <span class="fu">geom_line</span>()</span>
<span id="cb16-78"><a href="#cb16-78"></a>    })</span>
<span id="cb16-79"><a href="#cb16-79"></a>    </span>
<span id="cb16-80"><a href="#cb16-80"></a>    output<span class="sc">$</span>minmax <span class="ot">=</span> <span class="fu">renderTable</span>({</span>
<span id="cb16-81"><a href="#cb16-81"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-82"><a href="#cb16-82"></a>        <span class="fu">mutate</span>(</span>
<span id="cb16-83"><a href="#cb16-83"></a>          <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">wday</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb16-84"><a href="#cb16-84"></a>          <span class="at">date =</span> <span class="fu">as.character</span>(lubridate<span class="sc">::</span><span class="fu">date</span>(time))</span>
<span id="cb16-85"><a href="#cb16-85"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb16-86"><a href="#cb16-86"></a>        <span class="fu">group_by</span>(date, day) <span class="sc">%&gt;%</span></span>
<span id="cb16-87"><a href="#cb16-87"></a>        <span class="fu">summarize</span>(</span>
<span id="cb16-88"><a href="#cb16-88"></a>          <span class="st">`</span><span class="at">min</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">min</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb16-89"><a href="#cb16-89"></a>          <span class="st">`</span><span class="at">max</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">max</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb16-90"><a href="#cb16-90"></a>          <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb16-91"><a href="#cb16-91"></a>        )</span>
<span id="cb16-92"><a href="#cb16-92"></a>    })</span>
<span id="cb16-93"><a href="#cb16-93"></a>  }</span>
<span id="cb16-94"><a href="#cb16-94"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="thematic" class="slide level2">
<h2>thematic</h2>
<blockquote>
<p>Simplified theming of ggplot2, lattice, and {base} R graphics. In addition to providing a centralized approach to styling R graphics, thematic also enables automatic styling of R plots in Shiny, R Markdown, and RStudio.</p>
</blockquote>
<p>In the case of our Shiny app, all we need to do is to include a call to <code>thematic_shiny()</code> before the app is loaded.</p>
<ul>
<li>Using the value <code>"auto"</code> will attempt to resolve the <code>bg</code>, <code>fg</code>, <code>accent</code>, or <code>font</code> values at plot time.</li>
</ul>
</section>
<section id="demo-13---thematic" class="slide level2">
<h2>Demo 13 - thematic</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo13.R</code></p>
</div>
<div class="cell" data-file="../demos/demo13.R">
<div class="sourceCode cell-code" id="cb17" data-code-line-numbers="|12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="fu">library</span>(bslib)</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="fu">library</span>(thematic)</span>
<span id="cb17-5"><a href="#cb17-5"></a></span>
<span id="cb17-6"><a href="#cb17-6"></a>d <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb17-7"><a href="#cb17-7"></a></span>
<span id="cb17-8"><a href="#cb17-8"></a>d_vars <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10"></a>  <span class="fu">names</span>()</span>
<span id="cb17-11"><a href="#cb17-11"></a></span>
<span id="cb17-12"><a href="#cb17-12"></a><span class="fu">thematic_shiny</span>()</span>
<span id="cb17-13"><a href="#cb17-13"></a></span>
<span id="cb17-14"><a href="#cb17-14"></a><span class="fu">shinyApp</span>(</span>
<span id="cb17-15"><a href="#cb17-15"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb17-16"><a href="#cb17-16"></a>    <span class="at">theme =</span> <span class="fu">bs_theme</span>(),</span>
<span id="cb17-17"><a href="#cb17-17"></a>    <span class="fu">titlePanel</span>(<span class="st">"Weather Forecasts"</span>),</span>
<span id="cb17-18"><a href="#cb17-18"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb17-19"><a href="#cb17-19"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb17-20"><a href="#cb17-20"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb17-21"><a href="#cb17-21"></a>          <span class="st">"state"</span>, <span class="st">"Select a state"</span>,</span>
<span id="cb17-22"><a href="#cb17-22"></a>          <span class="at">choices =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(d<span class="sc">$</span>state))</span>
<span id="cb17-23"><a href="#cb17-23"></a>        ),</span>
<span id="cb17-24"><a href="#cb17-24"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb17-25"><a href="#cb17-25"></a>          <span class="st">"city"</span>, <span class="st">"Select a city"</span>,</span>
<span id="cb17-26"><a href="#cb17-26"></a>          <span class="at">choices =</span> <span class="fu">c</span>(),</span>
<span id="cb17-27"><a href="#cb17-27"></a>          <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb17-28"><a href="#cb17-28"></a>        ),</span>
<span id="cb17-29"><a href="#cb17-29"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb17-30"><a href="#cb17-30"></a>          <span class="st">"var"</span>, <span class="st">"Select a variable"</span>,</span>
<span id="cb17-31"><a href="#cb17-31"></a>          <span class="at">choices =</span> d_vars, <span class="at">selected =</span> <span class="st">"temperature"</span></span>
<span id="cb17-32"><a href="#cb17-32"></a>        )</span>
<span id="cb17-33"><a href="#cb17-33"></a>      ),</span>
<span id="cb17-34"><a href="#cb17-34"></a>      <span class="fu">mainPanel</span>( </span>
<span id="cb17-35"><a href="#cb17-35"></a>        <span class="fu">plotOutput</span>(<span class="st">"plot"</span>),</span>
<span id="cb17-36"><a href="#cb17-36"></a>        <span class="fu">tableOutput</span>(<span class="st">"minmax"</span>),</span>
<span id="cb17-37"><a href="#cb17-37"></a>        </span>
<span id="cb17-38"><a href="#cb17-38"></a>        <span class="fu">actionButton</span>(<span class="st">"b1"</span>, <span class="st">"primary"</span>, <span class="at">class =</span> <span class="st">"btn-primary"</span>),</span>
<span id="cb17-39"><a href="#cb17-39"></a>        <span class="fu">actionButton</span>(<span class="st">"b2"</span>, <span class="st">"secondary"</span>, <span class="at">class =</span> <span class="st">"btn-secondary"</span>),</span>
<span id="cb17-40"><a href="#cb17-40"></a>        <span class="fu">actionButton</span>(<span class="st">"b3"</span>, <span class="st">"success"</span>, <span class="at">class =</span> <span class="st">"btn-success"</span>),</span>
<span id="cb17-41"><a href="#cb17-41"></a>        <span class="fu">actionButton</span>(<span class="st">"b4"</span>, <span class="st">"info"</span>, <span class="at">class =</span> <span class="st">"btn-info"</span>),</span>
<span id="cb17-42"><a href="#cb17-42"></a>        <span class="fu">actionButton</span>(<span class="st">"b5"</span>, <span class="st">"warning"</span>, <span class="at">class =</span> <span class="st">"btn-warning"</span>),</span>
<span id="cb17-43"><a href="#cb17-43"></a>        <span class="fu">actionButton</span>(<span class="st">"b6"</span>, <span class="st">"danger"</span>, <span class="at">class =</span> <span class="st">"btn-danger"</span>)</span>
<span id="cb17-44"><a href="#cb17-44"></a>      )</span>
<span id="cb17-45"><a href="#cb17-45"></a>    )</span>
<span id="cb17-46"><a href="#cb17-46"></a>  ),</span>
<span id="cb17-47"><a href="#cb17-47"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb17-48"><a href="#cb17-48"></a>    <span class="fu">bs_themer</span>()</span>
<span id="cb17-49"><a href="#cb17-49"></a>    </span>
<span id="cb17-50"><a href="#cb17-50"></a>    d_city <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb17-51"><a href="#cb17-51"></a>      <span class="fu">req</span>(input<span class="sc">$</span>city)</span>
<span id="cb17-52"><a href="#cb17-52"></a>      d <span class="sc">%&gt;%</span></span>
<span id="cb17-53"><a href="#cb17-53"></a>        <span class="fu">filter</span>(city <span class="sc">%in%</span> input<span class="sc">$</span>city)</span>
<span id="cb17-54"><a href="#cb17-54"></a>    })</span>
<span id="cb17-55"><a href="#cb17-55"></a>    </span>
<span id="cb17-56"><a href="#cb17-56"></a>    <span class="fu">observe</span>({</span>
<span id="cb17-57"><a href="#cb17-57"></a>      cities <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb17-58"><a href="#cb17-58"></a>        <span class="fu">filter</span>(state <span class="sc">%in%</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb17-59"><a href="#cb17-59"></a>        <span class="fu">pull</span>(city) <span class="sc">%&gt;%</span></span>
<span id="cb17-60"><a href="#cb17-60"></a>        <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-61"><a href="#cb17-61"></a>        <span class="fu">sort</span>()</span>
<span id="cb17-62"><a href="#cb17-62"></a>      </span>
<span id="cb17-63"><a href="#cb17-63"></a>      <span class="fu">updateSelectInput</span>(</span>
<span id="cb17-64"><a href="#cb17-64"></a>        <span class="at">inputId =</span> <span class="st">"city"</span>, </span>
<span id="cb17-65"><a href="#cb17-65"></a>        <span class="at">choices =</span> cities</span>
<span id="cb17-66"><a href="#cb17-66"></a>      )</span>
<span id="cb17-67"><a href="#cb17-67"></a>    })</span>
<span id="cb17-68"><a href="#cb17-68"></a>    </span>
<span id="cb17-69"><a href="#cb17-69"></a>    output<span class="sc">$</span>plot <span class="ot">=</span> <span class="fu">renderPlot</span>({</span>
<span id="cb17-70"><a href="#cb17-70"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-71"><a href="#cb17-71"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>.data[[input<span class="sc">$</span>var]], <span class="at">color=</span>city)) <span class="sc">+</span></span>
<span id="cb17-72"><a href="#cb17-72"></a>        <span class="fu">ggtitle</span>(input<span class="sc">$</span>var) <span class="sc">+</span></span>
<span id="cb17-73"><a href="#cb17-73"></a>        <span class="fu">geom_line</span>()</span>
<span id="cb17-74"><a href="#cb17-74"></a>    })</span>
<span id="cb17-75"><a href="#cb17-75"></a>    </span>
<span id="cb17-76"><a href="#cb17-76"></a>    output<span class="sc">$</span>minmax <span class="ot">=</span> <span class="fu">renderTable</span>({</span>
<span id="cb17-77"><a href="#cb17-77"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-78"><a href="#cb17-78"></a>        <span class="fu">mutate</span>(</span>
<span id="cb17-79"><a href="#cb17-79"></a>          <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">wday</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb17-80"><a href="#cb17-80"></a>          <span class="at">date =</span> <span class="fu">as.character</span>(lubridate<span class="sc">::</span><span class="fu">date</span>(time))</span>
<span id="cb17-81"><a href="#cb17-81"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb17-82"><a href="#cb17-82"></a>        <span class="fu">group_by</span>(date, day) <span class="sc">%&gt;%</span></span>
<span id="cb17-83"><a href="#cb17-83"></a>        <span class="fu">summarize</span>(</span>
<span id="cb17-84"><a href="#cb17-84"></a>          <span class="st">`</span><span class="at">min</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">min</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb17-85"><a href="#cb17-85"></a>          <span class="st">`</span><span class="at">max</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">max</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb17-86"><a href="#cb17-86"></a>          <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb17-87"><a href="#cb17-87"></a>        )</span>
<span id="cb17-88"><a href="#cb17-88"></a>    })</span>
<span id="cb17-89"><a href="#cb17-89"></a>  }</span>
<span id="cb17-90"><a href="#cb17-90"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="deploying-shiny-apps" class="title-slide slide level1 center">
<h1>Deploying Shiny apps</h1>

</section>
<section id="your-turn---exercise-8" class="slide level2">
<h2>Your turn - Exercise 8</h2>
<p>Go to <a href="https://www.shinyapps.io/">shinyapps.io</a> and sign up for an account.</p>
<ul>
<li><p>You can create a new account via email &amp; a password</p></li>
<li><p>or via o-auth through Google or GitHub.</p></li>
</ul>
<p>If asked to pick a plan, use the Free option (more than sufficient for our needs here)</p>
<p><countdown time="300"></countdown></p>
</section>
<section id="organizing-your-app" class="slide level2">
<h2>Organizing your app</h2>
<p>For deployment generally apps will be organized as a single folder that contains all the necessary components (R script, data files, other static content).</p>
<ul>
<li><p>Pay attention to the nature of any paths used in your code</p>
<ul>
<li><p>Absolute paths are almost certainly going to break</p></li>
<li><p>Relative paths should be to the root of the app folder</p></li>
</ul></li>
<li><p>Static files generally are placed in the <code>www/</code> subfolder</p></li>
<li><p>Script <em>does not</em> need to be named <code>app.R</code> or <code>ui.R</code>/<code>server.R</code></p></li>
<li><p>Check / think about package dependencies</p></li>
</ul>
</section>
<section id="your-turn---exercise-9" class="slide level2">
<h2>Your turn - Exercise 9</h2>
<p>Now we will publish one of the demo apps to shinyapps.io (you will need to have completed Exercise 8)</p>
<ol type="1">
<li>Package up either <code>demo5.R</code> or <code>demo10.R</code> as an app in <code>exercises/ex9app</code> (you will need to create this folder)
<ul>
<li>Don’t forget the data</li>
</ul></li>
<li>Open the script file in <code>exercises/ex9app</code> and click the Publish Document button in the upper right of the pane (look for the <img data-src="images/publish_button.png"> icon)
<ul>
<li>You should be propted to “Connect Publishing Account”, follow the instructions and select shinyapps.io when prompted</li>
<li>When retrieving your token you may need to click <code>Dashboard</code> first and then your name (both in the upper right)</li>
</ul></li>
</ol>
</section>
<section id="your-turn---exercise-9-cont." class="slide level2">
<h2>Your turn - Exercise 9 (cont.)</h2>
<ol start="3" type="1">
<li><p>Once authenticated you should be prompted to select which files to include - choose what you think is reasonable</p></li>
<li><p>Your Shiny app should now be deploying and should open on shinyapps.io once live - check to see if everything works, if not go back and check Steps 1 and 3.</p></li>
</ol>
<p><countdown time="900"></countdown></p>
</section></section>
<section>
<section id="dynamic-uis" class="title-slide slide level1 center">
<h1>Dynamic UIs</h1>

</section>
<section id="the-goal" class="slide level2">
<h2>The goal</h2>
<p>Occasionally with a Shiny app it is necessary to have a user interface that needs to adapt dynamically based on something that cannot be known before runtime.</p>
<p>We will now work towards an example where we allow a user to upload data for new cities which will be used to supplement the existing weather data.</p>
<p>The issue here is that the new data may contain some subset of the existing columns (and they may have different names) so we will need to map between the two sets of columns and we don’t want to hard code for every possible column.</p>
</section>
<section id="uioutput-renderui" class="slide level2">
<h2><code>uiOutput()</code> &amp; <code>renderUI()</code></h2>
<p>These function as any other <code>*Output()</code> and <code>render*()</code> pair with the exception that the latter expects to return a UI element or a list of UI elements (static or reactive).</p>
<p>This allows for the introduction of new inputs and outputs dynamically and in a way they can then depend on the reactive elements (e.g.&nbsp;create one select input for each column in the new data for that task described above).</p>
</section>
<section id="a-quick-example" class="slide level2">
<h2>A quick example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18" data-code-line-numbers="|7,10|15-20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">library</span>(shiny)</span>
<span id="cb18-2"><a href="#cb18-2"></a></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="fu">shinyApp</span>(</span>
<span id="cb18-4"><a href="#cb18-4"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb18-6"><a href="#cb18-6"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb18-7"><a href="#cb18-7"></a>        <span class="fu">sliderInput</span>(<span class="st">"n"</span>, <span class="st">"# of buttons"</span>, <span class="at">min=</span><span class="dv">0</span>, <span class="at">max=</span><span class="dv">10</span>, <span class="at">value=</span><span class="dv">3</span>)</span>
<span id="cb18-8"><a href="#cb18-8"></a>      ),</span>
<span id="cb18-9"><a href="#cb18-9"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb18-10"><a href="#cb18-10"></a>        <span class="fu">uiOutput</span>(<span class="st">"buttons"</span>)</span>
<span id="cb18-11"><a href="#cb18-11"></a>      )</span>
<span id="cb18-12"><a href="#cb18-12"></a>    )</span>
<span id="cb18-13"><a href="#cb18-13"></a>  ),</span>
<span id="cb18-14"><a href="#cb18-14"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb18-15"><a href="#cb18-15"></a>    output<span class="sc">$</span>buttons <span class="ot">=</span> <span class="fu">renderUI</span>({</span>
<span id="cb18-16"><a href="#cb18-16"></a>      purrr<span class="sc">::</span><span class="fu">map</span>(</span>
<span id="cb18-17"><a href="#cb18-17"></a>        <span class="fu">seq_len</span>(input<span class="sc">$</span>n),</span>
<span id="cb18-18"><a href="#cb18-18"></a>        <span class="sc">~</span> <span class="fu">actionButton</span>(<span class="fu">paste0</span>(<span class="st">"btn"</span>, .x), <span class="fu">paste</span>(<span class="st">"Button"</span>, .x))</span>
<span id="cb18-19"><a href="#cb18-19"></a>      ) </span>
<span id="cb18-20"><a href="#cb18-20"></a>    })</span>
<span id="cb18-21"><a href="#cb18-21"></a>  }</span>
<span id="cb18-22"><a href="#cb18-22"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="your-turn---exercise-10" class="slide level2">
<h2>Your turn - Exercise 10</h2>
<p>Assume that you have the full data set (<code>d</code>) and a new data set (<code>d_new</code>) that you would like to append.</p>
<p>As stated before, there is no guarantee that the two data sets have matching columns (but they are likely to be similar). As such we would like to create a UI which will present one select input for each column in <code>d_new</code> where the choices are the columns in <code>d</code> (allowing us to map between the two data sets).</p>
<p>Using the scaffolded code in <code>exercies/ex10.R</code> add the necessary code to <code>renderUI()</code> to create the needed select inputs.</p>
<p><countdown time="720"></countdown></p>
</section>
<section id="demo-14---partial-matching" class="slide level2">
<h2>Demo 14 - Partial matching</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo14.R</code></p>
</div>
<div class="cell" data-file="../demos/demo14.R">
<div class="sourceCode cell-code" id="cb19" data-code-line-numbers=""><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb19-2"><a href="#cb19-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a>d <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb19-5"><a href="#cb19-5"></a>d_new <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/sedona.csv"</span>))</span>
<span id="cb19-6"><a href="#cb19-6"></a></span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="fu">shinyApp</span>(</span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb19-9"><a href="#cb19-9"></a>    <span class="fu">uiOutput</span>(<span class="st">"column_match"</span>)</span>
<span id="cb19-10"><a href="#cb19-10"></a>  ),</span>
<span id="cb19-11"><a href="#cb19-11"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb19-12"><a href="#cb19-12"></a>    output<span class="sc">$</span>column_match <span class="ot">=</span> <span class="fu">renderUI</span>({</span>
<span id="cb19-13"><a href="#cb19-13"></a>      new_cols <span class="ot">=</span> <span class="fu">names</span>(d_new)</span>
<span id="cb19-14"><a href="#cb19-14"></a>      cur_cols <span class="ot">=</span> <span class="fu">names</span>(d)</span>
<span id="cb19-15"><a href="#cb19-15"></a>      </span>
<span id="cb19-16"><a href="#cb19-16"></a>      <span class="fu">lapply</span>(</span>
<span id="cb19-17"><a href="#cb19-17"></a>        <span class="fu">seq_along</span>(new_cols),</span>
<span id="cb19-18"><a href="#cb19-18"></a>        <span class="cf">function</span>(i) {</span>
<span id="cb19-19"><a href="#cb19-19"></a>          <span class="fu">selectInput</span>(</span>
<span id="cb19-20"><a href="#cb19-20"></a>            <span class="at">inputId =</span> <span class="fu">paste0</span>(<span class="st">"colsel"</span>,i),</span>
<span id="cb19-21"><a href="#cb19-21"></a>            <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"Column matching `"</span>, new_cols[i], <span class="st">"`"</span>),</span>
<span id="cb19-22"><a href="#cb19-22"></a>            <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">""</span>, cur_cols),</span>
<span id="cb19-23"><a href="#cb19-23"></a>            <span class="at">selected =</span> cur_cols[ <span class="fu">pmatch</span>(new_cols[i], cur_cols) ] <span class="sc">%&gt;%</span></span>
<span id="cb19-24"><a href="#cb19-24"></a>              <span class="fu">replace_na</span>(<span class="st">""</span>)</span>
<span id="cb19-25"><a href="#cb19-25"></a>          )</span>
<span id="cb19-26"><a href="#cb19-26"></a>        }</span>
<span id="cb19-27"><a href="#cb19-27"></a>      )</span>
<span id="cb19-28"><a href="#cb19-28"></a>    })</span>
<span id="cb19-29"><a href="#cb19-29"></a>  }</span>
<span id="cb19-30"><a href="#cb19-30"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="demo-15---using-dynamic-inputs" class="slide level2">
<h2>Demo 15 - Using dynamic inputs</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo15.R</code></p>
</div>
<div class="cell" data-file="../demos/demo15.R">
<div class="sourceCode cell-code" id="cb20" data-code-line-numbers="|26-42|29-32|20,38-40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a>d_orig <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))[<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>,]</span>
<span id="cb20-5"><a href="#cb20-5"></a>d_new <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/sedona.csv"</span>))</span>
<span id="cb20-6"><a href="#cb20-6"></a></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="fu">shinyApp</span>(</span>
<span id="cb20-8"><a href="#cb20-8"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb20-9"><a href="#cb20-9"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb20-10"><a href="#cb20-10"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb20-11"><a href="#cb20-11"></a>        <span class="fu">uiOutput</span>(<span class="st">"column_match"</span>),  </span>
<span id="cb20-12"><a href="#cb20-12"></a>        <span class="fu">actionButton</span>(<span class="st">"append"</span>, <span class="st">"Append"</span>)</span>
<span id="cb20-13"><a href="#cb20-13"></a>      ),</span>
<span id="cb20-14"><a href="#cb20-14"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb20-15"><a href="#cb20-15"></a>        <span class="fu">tableOutput</span>(<span class="st">"table"</span>)    </span>
<span id="cb20-16"><a href="#cb20-16"></a>      )</span>
<span id="cb20-17"><a href="#cb20-17"></a>    )</span>
<span id="cb20-18"><a href="#cb20-18"></a>  ),</span>
<span id="cb20-19"><a href="#cb20-19"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb20-20"><a href="#cb20-20"></a>    d <span class="ot">=</span> <span class="fu">reactiveVal</span>(d_orig)</span>
<span id="cb20-21"><a href="#cb20-21"></a>    </span>
<span id="cb20-22"><a href="#cb20-22"></a>    output<span class="sc">$</span>table <span class="ot">=</span> <span class="fu">renderTable</span>({</span>
<span id="cb20-23"><a href="#cb20-23"></a>      <span class="fu">d</span>()</span>
<span id="cb20-24"><a href="#cb20-24"></a>    })</span>
<span id="cb20-25"><a href="#cb20-25"></a>    </span>
<span id="cb20-26"><a href="#cb20-26"></a>    <span class="fu">observe</span>({</span>
<span id="cb20-27"><a href="#cb20-27"></a>      new_cols <span class="ot">=</span> <span class="fu">names</span>(d_new)</span>
<span id="cb20-28"><a href="#cb20-28"></a>      </span>
<span id="cb20-29"><a href="#cb20-29"></a>      choices <span class="ot">=</span> <span class="fu">map_chr</span>(</span>
<span id="cb20-30"><a href="#cb20-30"></a>        <span class="fu">seq_along</span>(new_cols), </span>
<span id="cb20-31"><a href="#cb20-31"></a>        <span class="sc">~</span> input[[<span class="fu">paste0</span>(<span class="st">"colsel"</span>, .x)]]</span>
<span id="cb20-32"><a href="#cb20-32"></a>      )</span>
<span id="cb20-33"><a href="#cb20-33"></a>      </span>
<span id="cb20-34"><a href="#cb20-34"></a>      d_new_renamed <span class="ot">=</span> d_new <span class="sc">%&gt;%</span></span>
<span id="cb20-35"><a href="#cb20-35"></a>        <span class="fu">setNames</span>(choices) <span class="sc">%&gt;%</span></span>
<span id="cb20-36"><a href="#cb20-36"></a>        {.[,choices <span class="sc">!=</span> <span class="st">""</span>]}</span>
<span id="cb20-37"><a href="#cb20-37"></a>      </span>
<span id="cb20-38"><a href="#cb20-38"></a>      <span class="fu">d</span>(</span>
<span id="cb20-39"><a href="#cb20-39"></a>        <span class="fu">bind_rows</span>( <span class="fu">d</span>(), d_new_renamed )</span>
<span id="cb20-40"><a href="#cb20-40"></a>      )</span>
<span id="cb20-41"><a href="#cb20-41"></a>    }) <span class="sc">%&gt;%</span></span>
<span id="cb20-42"><a href="#cb20-42"></a>      <span class="fu">bindEvent</span>(input<span class="sc">$</span>append)</span>
<span id="cb20-43"><a href="#cb20-43"></a>    </span>
<span id="cb20-44"><a href="#cb20-44"></a>    output<span class="sc">$</span>column_match <span class="ot">=</span> <span class="fu">renderUI</span>({</span>
<span id="cb20-45"><a href="#cb20-45"></a>      new_cols <span class="ot">=</span> <span class="fu">names</span>(d_new)</span>
<span id="cb20-46"><a href="#cb20-46"></a>      cur_cols <span class="ot">=</span> <span class="fu">names</span>(d_orig)</span>
<span id="cb20-47"><a href="#cb20-47"></a>      </span>
<span id="cb20-48"><a href="#cb20-48"></a>      <span class="fu">lapply</span>(</span>
<span id="cb20-49"><a href="#cb20-49"></a>        <span class="fu">seq_along</span>(new_cols),</span>
<span id="cb20-50"><a href="#cb20-50"></a>        <span class="cf">function</span>(i) {</span>
<span id="cb20-51"><a href="#cb20-51"></a>          <span class="fu">selectInput</span>(</span>
<span id="cb20-52"><a href="#cb20-52"></a>            <span class="at">inputId =</span> <span class="fu">paste0</span>(<span class="st">"colsel"</span>,i),</span>
<span id="cb20-53"><a href="#cb20-53"></a>            <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"Column matching `"</span>, new_cols[i], <span class="st">"`"</span>),</span>
<span id="cb20-54"><a href="#cb20-54"></a>            <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">""</span>, cur_cols),</span>
<span id="cb20-55"><a href="#cb20-55"></a>            <span class="at">selected =</span> cur_cols[ <span class="fu">pmatch</span>(new_cols[i], cur_cols) ] <span class="sc">%&gt;%</span></span>
<span id="cb20-56"><a href="#cb20-56"></a>              <span class="fu">replace_na</span>(<span class="st">""</span>)</span>
<span id="cb20-57"><a href="#cb20-57"></a>          )</span>
<span id="cb20-58"><a href="#cb20-58"></a>        }</span>
<span id="cb20-59"><a href="#cb20-59"></a>      )</span>
<span id="cb20-60"><a href="#cb20-60"></a>    })</span>
<span id="cb20-61"><a href="#cb20-61"></a>  }</span>
<span id="cb20-62"><a href="#cb20-62"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tabset-panels" class="slide level2">
<h2>tabset panels</h2>
<p>Another approach to hiding UI elements (when not needed or when unrelated) is to use a <code>tabsetPanel()</code> with a number of <code>tabPanel()</code> children.</p>
<p>Once created each <code>tabPanel()</code> is a separate page with its own collection of UI elements, where only one panel can be viewed at a time.</p>

<aside><div>
<p>Note what happens in Demo 10 when each tabset is selected and the city is changed.</p>
</div></aside></section>
<section id="demo-16---tabset-panels" class="slide level2">
<h2>Demo 16 - tabset panels</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo16.R</code></p>
</div>
<div class="cell" data-file="../demos/demo16.R">
<div class="sourceCode cell-code" id="cb21" data-code-line-numbers="|29-36|62,70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb21-3"><a href="#cb21-3"></a>d <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb21-4"><a href="#cb21-4"></a></span>
<span id="cb21-5"><a href="#cb21-5"></a>d_vars <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="#cb21-6"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="#cb21-7"></a>  <span class="fu">names</span>()</span>
<span id="cb21-8"><a href="#cb21-8"></a></span>
<span id="cb21-9"><a href="#cb21-9"></a><span class="fu">shinyApp</span>(</span>
<span id="cb21-10"><a href="#cb21-10"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb21-11"><a href="#cb21-11"></a>    <span class="fu">titlePanel</span>(<span class="st">"Weather Forecasts"</span>),</span>
<span id="cb21-12"><a href="#cb21-12"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb21-13"><a href="#cb21-13"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb21-14"><a href="#cb21-14"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb21-15"><a href="#cb21-15"></a>          <span class="st">"state"</span>, <span class="st">"Select a state"</span>,</span>
<span id="cb21-16"><a href="#cb21-16"></a>          <span class="at">choices =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(d<span class="sc">$</span>state))</span>
<span id="cb21-17"><a href="#cb21-17"></a>        ),</span>
<span id="cb21-18"><a href="#cb21-18"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb21-19"><a href="#cb21-19"></a>          <span class="st">"city"</span>, <span class="st">"Select a city"</span>,</span>
<span id="cb21-20"><a href="#cb21-20"></a>          <span class="at">choices =</span> <span class="fu">c</span>(),</span>
<span id="cb21-21"><a href="#cb21-21"></a>          <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb21-22"><a href="#cb21-22"></a>        ),</span>
<span id="cb21-23"><a href="#cb21-23"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb21-24"><a href="#cb21-24"></a>          <span class="st">"var"</span>, <span class="st">"Select a variable"</span>,</span>
<span id="cb21-25"><a href="#cb21-25"></a>          <span class="at">choices =</span> d_vars, <span class="at">selected =</span> <span class="st">"temperature"</span></span>
<span id="cb21-26"><a href="#cb21-26"></a>        )</span>
<span id="cb21-27"><a href="#cb21-27"></a>      ),</span>
<span id="cb21-28"><a href="#cb21-28"></a>      <span class="fu">mainPanel</span>( </span>
<span id="cb21-29"><a href="#cb21-29"></a>        <span class="fu">tabsetPanel</span>(</span>
<span id="cb21-30"><a href="#cb21-30"></a>          <span class="fu">tabPanel</span>(</span>
<span id="cb21-31"><a href="#cb21-31"></a>            <span class="st">"Plot"</span>, <span class="fu">plotOutput</span>(<span class="st">"plot"</span>)</span>
<span id="cb21-32"><a href="#cb21-32"></a>          ),</span>
<span id="cb21-33"><a href="#cb21-33"></a>          <span class="fu">tabPanel</span>(</span>
<span id="cb21-34"><a href="#cb21-34"></a>            <span class="st">"Table"</span>, <span class="fu">tableOutput</span>(<span class="st">"minmax"</span>)</span>
<span id="cb21-35"><a href="#cb21-35"></a>          )</span>
<span id="cb21-36"><a href="#cb21-36"></a>        )</span>
<span id="cb21-37"><a href="#cb21-37"></a>      )</span>
<span id="cb21-38"><a href="#cb21-38"></a>    )</span>
<span id="cb21-39"><a href="#cb21-39"></a>  ),</span>
<span id="cb21-40"><a href="#cb21-40"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb21-41"><a href="#cb21-41"></a>    </span>
<span id="cb21-42"><a href="#cb21-42"></a>    d_city <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb21-43"><a href="#cb21-43"></a>      <span class="fu">req</span>(input<span class="sc">$</span>city)</span>
<span id="cb21-44"><a href="#cb21-44"></a>      d <span class="sc">%&gt;%</span></span>
<span id="cb21-45"><a href="#cb21-45"></a>        <span class="fu">filter</span>(city <span class="sc">%in%</span> input<span class="sc">$</span>city)</span>
<span id="cb21-46"><a href="#cb21-46"></a>    })</span>
<span id="cb21-47"><a href="#cb21-47"></a>    </span>
<span id="cb21-48"><a href="#cb21-48"></a>    <span class="fu">observe</span>({</span>
<span id="cb21-49"><a href="#cb21-49"></a>      cities <span class="ot">=</span> d <span class="sc">%&gt;%</span></span>
<span id="cb21-50"><a href="#cb21-50"></a>        <span class="fu">filter</span>(state <span class="sc">%in%</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb21-51"><a href="#cb21-51"></a>        <span class="fu">pull</span>(city) <span class="sc">%&gt;%</span></span>
<span id="cb21-52"><a href="#cb21-52"></a>        <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-53"><a href="#cb21-53"></a>        <span class="fu">sort</span>()</span>
<span id="cb21-54"><a href="#cb21-54"></a>      </span>
<span id="cb21-55"><a href="#cb21-55"></a>      <span class="fu">updateSelectInput</span>(</span>
<span id="cb21-56"><a href="#cb21-56"></a>        <span class="at">inputId =</span> <span class="st">"city"</span>, </span>
<span id="cb21-57"><a href="#cb21-57"></a>        <span class="at">choices =</span> cities</span>
<span id="cb21-58"><a href="#cb21-58"></a>      )</span>
<span id="cb21-59"><a href="#cb21-59"></a>    })</span>
<span id="cb21-60"><a href="#cb21-60"></a>    </span>
<span id="cb21-61"><a href="#cb21-61"></a>    output<span class="sc">$</span>plot <span class="ot">=</span> <span class="fu">renderPlot</span>({</span>
<span id="cb21-62"><a href="#cb21-62"></a>      <span class="fu">message</span>(<span class="st">"Render plot"</span>)</span>
<span id="cb21-63"><a href="#cb21-63"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-64"><a href="#cb21-64"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>.data[[input<span class="sc">$</span>var]], <span class="at">color=</span>city)) <span class="sc">+</span></span>
<span id="cb21-65"><a href="#cb21-65"></a>        <span class="fu">ggtitle</span>(input<span class="sc">$</span>var) <span class="sc">+</span></span>
<span id="cb21-66"><a href="#cb21-66"></a>        <span class="fu">geom_line</span>()</span>
<span id="cb21-67"><a href="#cb21-67"></a>    })</span>
<span id="cb21-68"><a href="#cb21-68"></a>    </span>
<span id="cb21-69"><a href="#cb21-69"></a>    output<span class="sc">$</span>minmax <span class="ot">=</span> <span class="fu">renderTable</span>({</span>
<span id="cb21-70"><a href="#cb21-70"></a>      <span class="fu">message</span>(<span class="st">"Render table"</span>)</span>
<span id="cb21-71"><a href="#cb21-71"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-72"><a href="#cb21-72"></a>        <span class="fu">mutate</span>(</span>
<span id="cb21-73"><a href="#cb21-73"></a>          <span class="at">day =</span> lubridate<span class="sc">::</span><span class="fu">wday</span>(time, <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>),</span>
<span id="cb21-74"><a href="#cb21-74"></a>          <span class="at">date =</span> <span class="fu">as.character</span>(lubridate<span class="sc">::</span><span class="fu">date</span>(time))</span>
<span id="cb21-75"><a href="#cb21-75"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="cb21-76"><a href="#cb21-76"></a>        <span class="fu">group_by</span>(date, day) <span class="sc">%&gt;%</span></span>
<span id="cb21-77"><a href="#cb21-77"></a>        <span class="fu">summarize</span>(</span>
<span id="cb21-78"><a href="#cb21-78"></a>          <span class="st">`</span><span class="at">min</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">min</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb21-79"><a href="#cb21-79"></a>          <span class="st">`</span><span class="at">max</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">max</span>(.data[[input<span class="sc">$</span>var]]),</span>
<span id="cb21-80"><a href="#cb21-80"></a>          <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb21-81"><a href="#cb21-81"></a>        )</span>
<span id="cb21-82"><a href="#cb21-82"></a>    })</span>
<span id="cb21-83"><a href="#cb21-83"></a>  }</span>
<span id="cb21-84"><a href="#cb21-84"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="demo-17---putting-it-all-together" class="slide level2">
<h2>Demo 17 - Putting it all together</h2>
<div class="code-file sourceCode cell-code">
<p><svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg> <code>demos/demo17.R</code></p>
</div>
<div class="cell" data-file="../demos/demo17.R">
<div class="sourceCode cell-code" id="cb22" data-code-line-numbers="|29-36|62,70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb22-2"><a href="#cb22-2"></a><span class="fu">library</span>(shiny)</span>
<span id="cb22-3"><a href="#cb22-3"></a>d_orig <span class="ot">=</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/weather.csv"</span>))</span>
<span id="cb22-4"><a href="#cb22-4"></a></span>
<span id="cb22-5"><a href="#cb22-5"></a>d_vars <span class="ot">=</span> d_orig <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7"></a>  <span class="fu">names</span>()</span>
<span id="cb22-8"><a href="#cb22-8"></a></span>
<span id="cb22-9"><a href="#cb22-9"></a><span class="fu">shinyApp</span>(</span>
<span id="cb22-10"><a href="#cb22-10"></a>  <span class="at">ui =</span> <span class="fu">fluidPage</span>(</span>
<span id="cb22-11"><a href="#cb22-11"></a>    <span class="fu">titlePanel</span>(<span class="st">"Weather Forecasts"</span>),</span>
<span id="cb22-12"><a href="#cb22-12"></a>    <span class="fu">sidebarLayout</span>(</span>
<span id="cb22-13"><a href="#cb22-13"></a>      <span class="fu">sidebarPanel</span>(</span>
<span id="cb22-14"><a href="#cb22-14"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb22-15"><a href="#cb22-15"></a>          <span class="st">"state"</span>, <span class="st">"Select a state"</span>,</span>
<span id="cb22-16"><a href="#cb22-16"></a>          <span class="at">choices =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(d_orig<span class="sc">$</span>state))</span>
<span id="cb22-17"><a href="#cb22-17"></a>        ),</span>
<span id="cb22-18"><a href="#cb22-18"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb22-19"><a href="#cb22-19"></a>          <span class="st">"city"</span>, <span class="st">"Select a city"</span>,</span>
<span id="cb22-20"><a href="#cb22-20"></a>          <span class="at">choices =</span> <span class="fu">c</span>(),</span>
<span id="cb22-21"><a href="#cb22-21"></a>          <span class="at">multiple =</span> <span class="cn">TRUE</span></span>
<span id="cb22-22"><a href="#cb22-22"></a>        ),</span>
<span id="cb22-23"><a href="#cb22-23"></a>        <span class="fu">selectInput</span>(</span>
<span id="cb22-24"><a href="#cb22-24"></a>          <span class="st">"var"</span>, <span class="st">"Select a variable"</span>,</span>
<span id="cb22-25"><a href="#cb22-25"></a>          <span class="at">choices =</span> d_vars, <span class="at">selected =</span> <span class="st">"temperature"</span></span>
<span id="cb22-26"><a href="#cb22-26"></a>        )</span>
<span id="cb22-27"><a href="#cb22-27"></a>      ),</span>
<span id="cb22-28"><a href="#cb22-28"></a>      <span class="fu">mainPanel</span>(</span>
<span id="cb22-29"><a href="#cb22-29"></a>        <span class="fu">tabsetPanel</span>(</span>
<span id="cb22-30"><a href="#cb22-30"></a>          <span class="fu">tabPanel</span>(</span>
<span id="cb22-31"><a href="#cb22-31"></a>            <span class="st">"Weather"</span>,</span>
<span id="cb22-32"><a href="#cb22-32"></a>            <span class="fu">plotOutput</span>(<span class="st">"plot"</span>)</span>
<span id="cb22-33"><a href="#cb22-33"></a>          ),</span>
<span id="cb22-34"><a href="#cb22-34"></a>          <span class="fu">tabPanel</span>(</span>
<span id="cb22-35"><a href="#cb22-35"></a>            <span class="st">"Upload"</span>,</span>
<span id="cb22-36"><a href="#cb22-36"></a>            <span class="fu">fileInput</span>(<span class="st">"upload"</span>, <span class="st">"Upload additional data"</span>, <span class="at">accept =</span> <span class="st">".csv"</span>),</span>
<span id="cb22-37"><a href="#cb22-37"></a>            <span class="fu">uiOutput</span>(<span class="st">"col_match"</span>)</span>
<span id="cb22-38"><a href="#cb22-38"></a>          )</span>
<span id="cb22-39"><a href="#cb22-39"></a>        )</span>
<span id="cb22-40"><a href="#cb22-40"></a>      )</span>
<span id="cb22-41"><a href="#cb22-41"></a>    )</span>
<span id="cb22-42"><a href="#cb22-42"></a>  ),</span>
<span id="cb22-43"><a href="#cb22-43"></a>  <span class="at">server =</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb22-44"><a href="#cb22-44"></a>    d <span class="ot">=</span> <span class="fu">reactiveVal</span>(d_orig)   <span class="co"># store for modified df </span></span>
<span id="cb22-45"><a href="#cb22-45"></a>    d_new <span class="ot">=</span> <span class="fu">reactiveVal</span>(<span class="cn">NULL</span>) <span class="co"># temp store for new df (to be appended)</span></span>
<span id="cb22-46"><a href="#cb22-46"></a>    </span>
<span id="cb22-47"><a href="#cb22-47"></a>    <span class="fu">observe</span>({</span>
<span id="cb22-48"><a href="#cb22-48"></a>      <span class="fu">d_new</span>(</span>
<span id="cb22-49"><a href="#cb22-49"></a>        readr<span class="sc">::</span><span class="fu">read_csv</span>(input<span class="sc">$</span>upload<span class="sc">$</span>datapath)</span>
<span id="cb22-50"><a href="#cb22-50"></a>      )</span>
<span id="cb22-51"><a href="#cb22-51"></a>      </span>
<span id="cb22-52"><a href="#cb22-52"></a>      new_cols <span class="ot">=</span> <span class="fu">names</span>(<span class="fu">d_new</span>()) <span class="co"># new column names</span></span>
<span id="cb22-53"><a href="#cb22-53"></a>      cur_cols <span class="ot">=</span> <span class="fu">names</span>(<span class="fu">d</span>())     <span class="co"># current column names</span></span>
<span id="cb22-54"><a href="#cb22-54"></a>      </span>
<span id="cb22-55"><a href="#cb22-55"></a>      <span class="co"># Create the dynamic select inputs</span></span>
<span id="cb22-56"><a href="#cb22-56"></a>      <span class="co">#   selected value based on partial matching</span></span>
<span id="cb22-57"><a href="#cb22-57"></a>      select_elems <span class="ot">=</span> <span class="fu">lapply</span>(</span>
<span id="cb22-58"><a href="#cb22-58"></a>        <span class="fu">seq_along</span>(new_cols),</span>
<span id="cb22-59"><a href="#cb22-59"></a>        <span class="cf">function</span>(i) {</span>
<span id="cb22-60"><a href="#cb22-60"></a>          <span class="fu">selectInput</span>(</span>
<span id="cb22-61"><a href="#cb22-61"></a>            <span class="at">inputId =</span> <span class="fu">paste0</span>(<span class="st">"colsel"</span>,i),</span>
<span id="cb22-62"><a href="#cb22-62"></a>            <span class="at">label =</span> <span class="fu">paste0</span>(<span class="st">"Column matching `"</span>, new_cols[i],<span class="st">"`"</span>),</span>
<span id="cb22-63"><a href="#cb22-63"></a>            <span class="at">choices =</span> <span class="fu">c</span>(<span class="st">""</span>, cur_cols),</span>
<span id="cb22-64"><a href="#cb22-64"></a>            <span class="at">selected =</span> cur_cols[ <span class="fu">pmatch</span>(new_cols[i], cur_cols) ] <span class="sc">%&gt;%</span></span>
<span id="cb22-65"><a href="#cb22-65"></a>              <span class="fu">replace_na</span>(<span class="st">""</span>)</span>
<span id="cb22-66"><a href="#cb22-66"></a>          )</span>
<span id="cb22-67"><a href="#cb22-67"></a>        }</span>
<span id="cb22-68"><a href="#cb22-68"></a>      )</span>
<span id="cb22-69"><a href="#cb22-69"></a>      </span>
<span id="cb22-70"><a href="#cb22-70"></a>      <span class="co"># Show select elements and helper buttons</span></span>
<span id="cb22-71"><a href="#cb22-71"></a>      output<span class="sc">$</span>col_match <span class="ot">=</span> <span class="fu">renderUI</span>({</span>
<span id="cb22-72"><a href="#cb22-72"></a>        <span class="fu">list</span>(</span>
<span id="cb22-73"><a href="#cb22-73"></a>          select_elems,</span>
<span id="cb22-74"><a href="#cb22-74"></a>          <span class="fu">actionButton</span>(<span class="st">"append"</span>, <span class="st">"Append Data"</span>, <span class="at">class =</span> <span class="st">"btn-success"</span>),</span>
<span id="cb22-75"><a href="#cb22-75"></a>          <span class="fu">actionButton</span>(<span class="st">"cancel"</span>, <span class="st">"Cancel"</span>)</span>
<span id="cb22-76"><a href="#cb22-76"></a>        )</span>
<span id="cb22-77"><a href="#cb22-77"></a>      })</span>
<span id="cb22-78"><a href="#cb22-78"></a>    }) <span class="sc">%&gt;%</span></span>
<span id="cb22-79"><a href="#cb22-79"></a>      <span class="fu">bindEvent</span>(input<span class="sc">$</span>upload)</span>
<span id="cb22-80"><a href="#cb22-80"></a>    </span>
<span id="cb22-81"><a href="#cb22-81"></a>    <span class="fu">observe</span>({</span>
<span id="cb22-82"><a href="#cb22-82"></a>      output<span class="sc">$</span>col_match <span class="ot">=</span> <span class="fu">renderUI</span>({})</span>
<span id="cb22-83"><a href="#cb22-83"></a>      <span class="fu">d_new</span>(<span class="cn">NULL</span>)</span>
<span id="cb22-84"><a href="#cb22-84"></a>    }) <span class="sc">%&gt;%</span></span>
<span id="cb22-85"><a href="#cb22-85"></a>      <span class="fu">bindEvent</span>(input<span class="sc">$</span>cancel)</span>
<span id="cb22-86"><a href="#cb22-86"></a>    </span>
<span id="cb22-87"><a href="#cb22-87"></a>    <span class="fu">observe</span>({</span>
<span id="cb22-88"><a href="#cb22-88"></a>      new_cols <span class="ot">=</span> <span class="fu">names</span>(<span class="fu">d_new</span>())</span>
<span id="cb22-89"><a href="#cb22-89"></a>      </span>
<span id="cb22-90"><a href="#cb22-90"></a>      choices <span class="ot">=</span> <span class="fu">map_chr</span>(</span>
<span id="cb22-91"><a href="#cb22-91"></a>        <span class="fu">seq_along</span>(new_cols), </span>
<span id="cb22-92"><a href="#cb22-92"></a>        <span class="sc">~</span> input[[<span class="fu">paste0</span>(<span class="st">"colsel"</span>, .x)]]</span>
<span id="cb22-93"><a href="#cb22-93"></a>      )</span>
<span id="cb22-94"><a href="#cb22-94"></a>      </span>
<span id="cb22-95"><a href="#cb22-95"></a>      d_new_renamed <span class="ot">=</span> <span class="fu">d_new</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-96"><a href="#cb22-96"></a>        <span class="fu">setNames</span>(choices) <span class="sc">%&gt;%</span></span>
<span id="cb22-97"><a href="#cb22-97"></a>        {.[,choices <span class="sc">!=</span> <span class="st">""</span>]}</span>
<span id="cb22-98"><a href="#cb22-98"></a>      </span>
<span id="cb22-99"><a href="#cb22-99"></a>      <span class="fu">d</span>(</span>
<span id="cb22-100"><a href="#cb22-100"></a>        <span class="fu">bind_rows</span>( <span class="fu">d</span>(), d_new_renamed )</span>
<span id="cb22-101"><a href="#cb22-101"></a>      )</span>
<span id="cb22-102"><a href="#cb22-102"></a>      </span>
<span id="cb22-103"><a href="#cb22-103"></a>      <span class="co"># Cleanup</span></span>
<span id="cb22-104"><a href="#cb22-104"></a>      <span class="fu">d_new</span>(<span class="cn">NULL</span>)</span>
<span id="cb22-105"><a href="#cb22-105"></a>      output<span class="sc">$</span>col_match <span class="ot">=</span> <span class="fu">renderUI</span>({</span>
<span id="cb22-106"><a href="#cb22-106"></a>        <span class="fu">list</span>(<span class="st">"Successfully added "</span>, <span class="fu">nrow</span>(d_new_renamed), <span class="st">" rows  of data!"</span>)</span>
<span id="cb22-107"><a href="#cb22-107"></a>      })</span>
<span id="cb22-108"><a href="#cb22-108"></a>    }) <span class="sc">%&gt;%</span></span>
<span id="cb22-109"><a href="#cb22-109"></a>      <span class="fu">bindEvent</span>(input<span class="sc">$</span>append)</span>
<span id="cb22-110"><a href="#cb22-110"></a>    </span>
<span id="cb22-111"><a href="#cb22-111"></a>    <span class="co"># Previous code</span></span>
<span id="cb22-112"><a href="#cb22-112"></a>    d_city <span class="ot">=</span> <span class="fu">reactive</span>({</span>
<span id="cb22-113"><a href="#cb22-113"></a>      <span class="fu">req</span>(input<span class="sc">$</span>city)</span>
<span id="cb22-114"><a href="#cb22-114"></a>      <span class="fu">d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-115"><a href="#cb22-115"></a>        <span class="fu">filter</span>(city <span class="sc">%in%</span> input<span class="sc">$</span>city)</span>
<span id="cb22-116"><a href="#cb22-116"></a>    })</span>
<span id="cb22-117"><a href="#cb22-117"></a>    </span>
<span id="cb22-118"><a href="#cb22-118"></a>    <span class="fu">observe</span>({</span>
<span id="cb22-119"><a href="#cb22-119"></a>      cities <span class="ot">=</span> <span class="fu">d</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-120"><a href="#cb22-120"></a>        <span class="fu">filter</span>(state <span class="sc">%in%</span> input<span class="sc">$</span>state) <span class="sc">%&gt;%</span></span>
<span id="cb22-121"><a href="#cb22-121"></a>        <span class="fu">pull</span>(city) <span class="sc">%&gt;%</span></span>
<span id="cb22-122"><a href="#cb22-122"></a>        <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-123"><a href="#cb22-123"></a>        <span class="fu">sort</span>()</span>
<span id="cb22-124"><a href="#cb22-124"></a>      </span>
<span id="cb22-125"><a href="#cb22-125"></a>      <span class="fu">updateSelectInput</span>(</span>
<span id="cb22-126"><a href="#cb22-126"></a>        <span class="at">inputId =</span> <span class="st">"city"</span>, </span>
<span id="cb22-127"><a href="#cb22-127"></a>        <span class="at">choices =</span> cities</span>
<span id="cb22-128"><a href="#cb22-128"></a>      )</span>
<span id="cb22-129"><a href="#cb22-129"></a>    })</span>
<span id="cb22-130"><a href="#cb22-130"></a>    </span>
<span id="cb22-131"><a href="#cb22-131"></a>    output<span class="sc">$</span>plot <span class="ot">=</span> <span class="fu">renderPlot</span>({</span>
<span id="cb22-132"><a href="#cb22-132"></a>      <span class="fu">d_city</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-133"><a href="#cb22-133"></a>        <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>time, <span class="at">y=</span>.data[[input<span class="sc">$</span>var]], <span class="at">color=</span>city)) <span class="sc">+</span></span>
<span id="cb22-134"><a href="#cb22-134"></a>        <span class="fu">ggtitle</span>(input<span class="sc">$</span>var) <span class="sc">+</span></span>
<span id="cb22-135"><a href="#cb22-135"></a>        <span class="fu">geom_line</span>()</span>
<span id="cb22-136"><a href="#cb22-136"></a>    })</span>
<span id="cb22-137"><a href="#cb22-137"></a>  }</span>
<span id="cb22-138"><a href="#cb22-138"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="saving-state" class="slide level2">
<h2>Saving state</h2>
<p>We’ve now allowed a user to augment the existing data - but how do we persist those changes?</p>
<p>There are many options with various trade offs,</p>
<ul>
<li><p>Local file storage (e.g.&nbsp;overwrite <code>weather.csv</code>)</p></li>
<li><p>Remote file storage (e.g.&nbsp;Dropbox, Google Drive, etc.)</p></li>
<li><p>Relational DB - local or remote (e.g.&nbsp;sqlite, MySQL, Postgres, etc.)</p></li>
</ul>

<aside><div>
<p>There is a article addressing different approaches <a href="https://shiny.rstudio.com/articles/persistent-data-storage.html">here</a>.</p>
</div></aside></section></section>
<section>
<section id="what-next-what-else" class="title-slide slide level1 center">
<h1>What next / what else</h1>

</section>
<section id="shiny-user-showcase" class="slide level2">
<h2>Shiny user showcase</h2>
<div class="large" style="text-align: center">
<p><a href="https://shiny.rstudio.com/gallery/">shiny.rstudio.com/gallery/</a></p>
</div>
<blockquote>
<p>The Shiny User Showcase is comprised of contributions from the Shiny app developer community. The apps are categorized into application areas and presented with a brief description, tags, and for many, the source code. Note that many of these apps are winners and honorable mentions of our annual Shiny contest!</p>
</blockquote>
<p>Shiny contest winners blog posts:</p>
<ul>
<li><p><a href="https://www.rstudio.com/blog/first-shiny-contest-winners/">1st contest winners</a></p></li>
<li><p><a href="https://www.rstudio.com/blog/winners-of-the-2nd-shiny-contest/">2nd contest winners</a></p></li>
<li><p><a href="https://www.rstudio.com/blog/winners-of-the-3rd-annual-shiny-contest/">3rd contest winners</a></p></li>
</ul>
</section>
<section id="shinyjs" class="slide level2">
<h2>shinyjs</h2>
<div class="large" style="text-align: center">
<p><a href="https://deanattali.com/shinyjs/">deanattali.com/shinyjs/</a></p>
</div>
<blockquote>
<p>Easily improve the user experience of your Shiny apps in seconds</p>
</blockquote>
<ul>
<li><p>Hide (or show) an element</p></li>
<li><p>Disable (or enable) an input</p></li>
<li><p>Reset an input back to its original value</p></li>
<li><p>Delay code execution</p></li>
<li><p>Easily call your own JavaScript functions from R</p></li>
</ul>
</section>
<section id="dt" class="slide level2">
<h2>DT</h2>
<div class="large" style="text-align: center">
<p><a href="https://rstudio.github.io/DT/">rstudio.github.io/DT/</a></p>
</div>
<blockquote>
<p>The R package DT provides an R interface to the JavaScript library DataTables. R data objects (matrices or data frames) can be displayed as tables on HTML pages, and DataTables provides filtering, pagination, sorting, and many other features in the tables.</p>
</blockquote>
<ul>
<li><p>Interactive tables</p></li>
<li><p>Tables as inputs</p></li>
<li><p>Editable tables</p></li>
</ul>
</section>
<section id="reactable" class="slide level2">
<h2>reactable</h2>
<div class="large" style="text-align: center">
<p><a href="https://glin.github.io/reactable/">glin.github.io/reactable/</a></p>
</div>
<blockquote>
<p>Interactive data tables for R, based on the <a href="https://github.com/tanstack/table/tree/v7">React Table</a> library and made with <a href="https://github.com/react-R/reactR">reactR</a>.</p>
</blockquote>
<ul>
<li>Sorting, filtering, pagination</li>
<li>Grouping and aggregation</li>
<li>Built-in column formatting</li>
<li>Custom rendering via R or JavaScript</li>
<li>Expandable rows and nested tables</li>
<li>Conditional styling</li>
</ul>
</section>
<section id="golem" class="slide level2">
<h2>golem</h2>
<div class="large" style="text-align: center">
<p><a href="https://thinkr-open.github.io/golem/">thinkr-open.github.io/golem/</a></p>
</div>
<blockquote>
<p>golem is an opinionated framework for building production-grade shiny applications.</p>
</blockquote>

<img data-src="https://raw.githubusercontent.com/ThinkR-open/golem/master/inst/rstudio/templates/project/golem.png" style="width:20.0%" class="r-stretch quarto-figure-center"></section>
<section id="htmlwidgets" class="slide level2">
<h2>htmlwidgets</h2>
<div class="large" style="text-align: center">
<p><a href="https://www.htmlwidgets.org/">htmlwidgets.org</a></p>
</div>
<blockquote>
<p>The htmlwidgets package provides a framework for easily creating R bindings to JavaScript libraries. Widgets created using the framework can be:</p>
<ul>
<li>Used at the R console for data analysis just like conventional R plots (via RStudio Viewer).</li>
<li>Seamlessly embedded within R Markdown documents and Shiny web applications.</li>
<li>Saved as standalone web pages for ad-hoc sharing via email, Dropbox, etc.</li>
</ul>
</blockquote>
</section>
<section id="pool" class="slide level2">
<h2>pool</h2>
<div class="large" style="text-align: center">
<p><a href="https://rstudio.github.io/pool/">rstudio.github.io/pool/</a></p>
</div>
<blockquote>
<p>The goal of the pool package is to abstract away the logic of connection management and the performance cost of fetching a new connection from a remote database. These concerns are especially prominent in interactive contexts, like Shiny apps (which connect to a remote database) or even at the R console.</p>
</blockquote>
<p>See articles available at <a href="https://shiny.rstudio.com/articles/#data">shiny.rstudio.com/articles/#data</a></p>
</section>
<section id="awesome-shiny-extensions" class="slide level2">
<h2>Awesome Shiny Extensions</h2>
<div class="large" style="text-align: center">
<p><a href="https://github.com/nanxstats/awesome-shiny-extensions">github.com/nanxstats/awesome-shiny-extensions</a></p>
</div>
<blockquote>
<p>A curated list of awesome R packages that offer extended UI or server components for the R web framework Shiny.</p>
</blockquote>

<img data-src="https://raw.githubusercontent.com/nanxstats/awesome-shiny-extensions/master/logo.png" style="width:20.0%" class="r-stretch quarto-figure-center"></section>
<section id="shiny-developer-series" class="slide level2">
<h2>Shiny Developer Series</h2>
<div class="large" style="text-align: center">
<p><a href="https://shinydevseries.com/">shinydevseries.com/</a></p>
</div>
<blockquote>
<p>The goals of the Shiny Developer Series are to showcase the innovative applications and packages in the ever-growing Shiny ecosystem, as well as the brilliant developers behind them! The series is composed of these components:</p>
<ul>
<li><p>Interviews with guests …</p></li>
<li><p>Video tutorials and live streams …</p></li>
</ul>
</blockquote>
</section></section>
<section>
<section id="qa" class="title-slide slide level1 center">
<h1>Q&amp;A</h1>

</section>
<section id="workshop-survey" class="slide level2">
<h2>Workshop Survey</h2>
<p><br><br><br><br></p>
<div class="larger" style="text-align: center;">
<p><a href="http://rstd.io/conf-workshop-survey">rstd.io/conf-workshop-survey</a></p>
</div>
</section>
<section id="thank-you" class="slide level2">
<h2>Thank you!</h2>

<table class="details">
<tbody><tr>
<td style="text-align:center">
&nbsp;<svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"></path></svg>
</td>
<td>
<a href="https://rstd.io/start-shiny">rstd.io/start-shiny</a>
</td>
</tr>
<tr>
<td style="text-align:center">
&nbsp;<svg aria-hidden="true" role="img" viewbox="0 0 384 512" style="height:1em;width:0.75em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm160-14.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"></path></svg>
</td>
<td>
<a href="https://github.com/rstudio-conf-2022/get-started-shiny/">rstudio-conf-2022/get-started-shiny/</a>
</td>
</tr>
<tr>
<td style="text-align:center">
&nbsp;<svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg>
</td>
<td>
<a href="mailto:rundel@gmail.com">rundel@gmail.com</a><br> <a href="mailto:colin.rundel@duke.edu">colin.rundel@duke.edu</a>
</td>
</tr>
<tr>
<td style="text-align:center">
&nbsp;<svg aria-hidden="true" role="img" viewbox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
</td>
<td>
<a href="https://github.com/rundel">rundel</a>
</td>
</tr>
<tr>
<td style="text-align:center">
&nbsp;<svg aria-hidden="true" role="img" viewbox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
</td>
<td>
<a href="https://twitter.com/rundel"><span class="citation" data-cites="rundel">@rundel</span></a>
</td>
</tr>

</tbody></table>

<img src="images/shiny.png" class="slide-logo r-stretch"><div class="footer footer-default">
<p>RStudioConf 2022 - Getting Started with Shiny</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="03-Day_2_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="03-Day_2_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/reveal-count-down/countdown.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="03-Day_2_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="03-Day_2_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealCountDown, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          let href = ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>